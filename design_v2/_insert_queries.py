#!/usr/bin/env python3
"""一次性插入16条新query到query_pools.yaml"""
import yaml

filepath = '/Users/feixiaoxu01/Documents/agents/agent_auto_evaluation/universal_scenario_framework/tmp_scenarios/novel_writing_alchemist/design_v2/query_pools.yaml'

with open(filepath, 'r') as f:
    data = yaml.safe_load(f)

pools = data['query_pools']
total_before = sum(len(qs) for qs in pools.values())

# ============================================================
# 16条新query定义
# ============================================================

new_queries = {
    'NW_CLEAR_MEDIUM_ANGSTY': [
        {
            'query_id': 'M_Q11',
            'source': '外部征集(泽坤) - 五代十国·家族POV·群像史诗',
            'donator': '泽坤',
            'x_axis': ['D20为理想牺牲', 'D21为亲人牺牲'],
            'y_axis': ['历史架空', '群像史诗', '低武写实'],
            'word_count': '200000',
            'query_text': '请为我写一部五代十国背景的历史架空小说，这是以家族为第一视角（POV）的群像史诗。在这个视角下，每一代主角都会老去、会战死，但"家族的意志"才是贯穿始终、永不退场的主角。设定为低武写实风格。第一代主角穿越到五代十国的祖宗身上（后唐末期北方沙陀军阀李存勖麾下的偏将家族族长），为了不让现代的自己消失，必须让家族传承下去。第一代主角虽有现代地质勘探专业背景，但受限于古代生产力，绝大部分时间无法发挥作用，时间线处于后晋天福元年（936年）。第一代主角不是历史专家，仅知道朱温篡唐和石敬瑭割让燕云十六州等大事件，这些节点是这个家族唯一的优势。例如知道石敬瑭即将割让燕云十六州，家族驻地即将在防线之外，面临辽国铁骑的屠杀。第一代主角在契丹铁骑南下、友军背叛的绝境中，为了让家族延续，立下"众人皆薪柴，唯火种不可灭"的残酷家规，并逼迫长子率族人南逃。高潮部分描写主角利用地质知识勘测到的古河道隐患，在暴雨夜诱发一次小规模的山体滑坡，埋葬敌军先锋，自己也力竭战死。文风要求极度克制、冷峻，侧重描写北方战场的风沙感、军事地理的考据感以及家族为了生存必须抛弃温情的异化过程。杜绝任何系统和爽文套路。20万字篇幅。\n'
        },
        {
            'query_id': 'M_Q12',
            'source': '外部征集(泽坤) - 五代十国·金陵首富·锦囊权谋',
            'donator': '泽坤',
            'x_axis': ['B12获取', 'F33错误判断'],
            'y_axis': ['历史架空', '商战权谋'],
            'word_count': '200000',
            'query_text': "请为我构思一部五代十国背景的权谋历史小说，背景是后周世宗柴荣北伐，南唐风雨飘摇。主角是南唐金陵首富之家的第三代掌舵人，其家族因初代穿越者祖先留下的'锦囊'多次在国难中'精准逃顶'而保全实力，虽富可敌国却被南唐皇室视为'不忠不义的妖孽'，正面临抄家灭族的清洗危机。故事从后周世宗柴荣北伐、南唐风雨飘摇的公元959年切入，主角在宗祠密室打开祖先留下的最后一道锦囊，赫然看到'陈桥兵变时，点检做天子。全族北投，迟则无死所'这句预言。主角不得不在金陵城的波诡云谲中长袖善舞，一面与腐朽的南唐权贵虚与委蛇，一面暗中布局将全族资产作为投名状输送给此时尚未发迹的赵匡胤。20万字篇幅。\n"
        },
        {
            'query_id': 'M_Q13',
            'source': '外部征集(泽坤) - 五代·流民组织·荒诞现实主义',
            'donator': '泽坤',
            'x_axis': ['B8反抗', 'B11谜'],
            'y_axis': ['历史架空', '荒诞现实主义', '组织演化'],
            'word_count': '200000',
            'query_text': '请以荒诞现实主义的笔触，撰写一部关于五代流民成长为神秘组织的史诗。首代第一代首领是挪威语专业的边缘穿越者，在朱温篡唐的黑暗时代，他将这种无人能懂的语言伪装成神谕，将一盘散沙的流民改造成组织严密类似宗教的互助组织，并以身为饵掩护众人突围。此后的叙事重心需随着时间推移，转向那些历代组织首领，组织凭借信息差（在这个时代，没有任何人能破解这种日耳曼语系的语言）与绝对的忠诚，在军阀混战中反复横跳、借壳生存。重点不在于个人的英雄主义，而在于这种荒谬的"神学遗产"如何塑造了一个行事诡谲的情报组织，并最终使其在历史的缝隙中活到了最后。主角的"有限历史知识"（朱温篡唐等节点）不是用来改朝换代的，而是用来倒计时的。要写出那种"看着毁灭一步步逼近，却只能在这个庞大的历史车轮下偷出一丝生机"的无力感和宿命感。20万字篇幅。\n'
        },
    ],
    'NW_CLEAR_MEDIUM_SUSPENSE': [
        {
            'query_id': 'M_SUS_Q02',
            'source': '外部征集(晓旭姐粉头子) - 文物修复师·通灵·博物馆悬疑',
            'donator': '晓旭姐粉头子',
            'x_axis': ['B11谜', 'B9冒险事业'],
            'y_axis': ['行业悬疑', '文物修复'],
            'word_count': '150000',
            'query_text': '《文物修复师：我在博物馆夜班通灵》核心设定：95后文物修复师值夜班时发现破损文物会"说话"，实为历史执念残留，他靠修复文物化解千年怨念，却卷入跨国文物黑市阴谋。写作手法：用文物细节（铜锈成分/织物经纬）作为破局关键，每件文物修复过程对应一段被掩盖的历史真相，真相碎片最终拼出当代文物走私网络。避雷手法：禁用"一眼鉴宝"金手指，所有判断必须基于真实考古知识；反派不设脸谱化恶人，而是被资本裹挟的学者，保留人性挣扎。15万字。\n'
        },
        {
            'query_id': 'M_SUS_Q03',
            'source': '外部征集(晓旭姐粉头子) - 鉴宝·传国玉玺·文物走私悬疑',
            'donator': '晓旭姐粉头子',
            'x_axis': ['B11谜', 'B5追逐'],
            'y_axis': ['鉴宝悬疑', '文物走私'],
            'word_count': '120000',
            'query_text': '《鉴宝：传国玉玺在我家腌咸菜》核心设定：古玩店学徒被女友嘲讽穷鬼，深夜捡漏的"破石头"实为传国玉玺残片，触碰可读取历史记忆，却因此被卷入文物走私集团追杀。写作手法：用文物修复过程推进剧情（清洗铜锈时闪回铸造场景），历史记忆碎片需主角主动拼接，真相揭露节奏参考《看不见的客人》式反转。避雷手法：拒绝"神豪打脸"套路，主角始终经济拮据，靠智慧周旋而非砸钱；文物知识必须经得起专业考证，避免"一眼千年"式玄幻鉴宝。12万字。\n'
        },
    ],
    'NW_CLEAR_LONG_ANGSTY': [
        {
            'query_id': 'L_Q11',
            'source': '外部征集(晓旭姐粉头子) - 一指通天·废柴崛起·宗门玄幻',
            'donator': '晓旭姐粉头子',
            'x_axis': ['B8反抗', 'B31与神冲突'],
            'y_axis': ['男频玄幻', '升级流'],
            'word_count': '500000',
            'query_text': '天生残缺、只剩一根手指的废柴少年，被宗门视为弃子并遭退婚羞辱，却意外觉醒上古神指传承，从杂役一路崛起，在宗门内斗、家族阴谋、上界镇压与天道压迫中不断反杀升级，最终以"一指通天"打破既定命运（避雷：不写无脑打脸、不频繁换地图、不滥用后宫）。50万字。\n'
        },
        {
            'query_id': 'L_Q12',
            'source': '外部征集(晓旭姐粉头子) - 诸天试炼·黑猫伙伴·反杀主神',
            'donator': '晓旭姐粉头子',
            'x_axis': ['B11谜', 'B8反抗'],
            'y_axis': ['无限流', '诸天万界'],
            'word_count': '500000',
            'query_text': '普通青年被拉入诸天试炼，初始配置只有一只来历不明的黑猫作为唯一伙伴，在不断更换的世界中靠人猫协作破解规则、反杀主神、掠夺权限，并逐步揭开黑猫真实身份是高维文明遗留核心的真相（避雷：不强行卖惨、不副本同质化、不后期战力崩盘）。50万字。\n'
        },
        {
            'query_id': 'L_Q13',
            'source': '外部征集(晓旭姐粉头子) - 玄幻直播·宗门经营·商盟博弈',
            'donator': '晓旭姐粉头子',
            'x_axis': ['B12获取', 'B30野心'],
            'y_axis': ['玄幻商战', '系统流', '直播经营'],
            'word_count': '600000',
            'query_text': '融合玄幻、重生、直播、商战与宗门经营的男性向爽文设定——主角原是现代顶级直播操盘手，重生为破产宗门的底层杂役弟子，修为被废、宗门资源枯竭且高层战死，仅靠清扫与账册整理勉力维持。因宗门18岁时被诱骗签署灵脉抵押契约陷入债务陷阱，黑市商盟操盘者（地下修真资本代理人）以债务陷阱、拍卖垄断、舆论抹黑及暴力威慑逼债，甚至为魔修势力输送能量。主角绑定【诸天商盟直播系统】，可模拟"失败未来线"预演错误决策结局，借此规避风险、逆转局势。其与敌对宗门少主存在潜在联姻与并购关系，系统预演显示接受联姻将被吞并并遭软禁。关键创伤事件中，师兄师姐为护宗门自毁修为引爆阵法战死，主角幸存却留终身执念。阶段性目标：前期通过直播卖货还清利息保住山门，中期众筹灵脉扩建分宗掌控经营权，后期反收割黑市资本、清算魔修体系；终极谜团揭示黑市商盟背后藏有上古魔修残魂，正通过金融与资源掠夺复活魔神，而系统本身是远古文明留下的反收割工具。60万字。\n'
        },
    ],
    'NW_CLEAR_MEDIUM_SWEET': [
        {
            'query_id': 'M_Q14',
            'source': '外部征集(晓旭姐粉头子) - 修仙直播间·代际反差·文化碰撞',
            'donator': '晓旭姐粉头子',
            'x_axis': ['B8反抗'],
            'y_axis': ['修仙喜剧', '代际反差'],
            'word_count': '120000',
            'query_text': '《修仙直播间：曾孙女把我挂热搜了》核心设定：隐居昆仑山的渡劫期老祖被00后曾孙女偷拍直播，全网当特效，直到海外超能组织入侵华夏，老祖被迫用"传统文化"降维打击。写作手法：用代际反差制造笑点（老祖用《道德经》解析量子纠缠），战斗场面化用非遗技艺（太极拳破超能力、书法笔意斩精神控制）。避雷手法：禁用"修仙碾压现代科技"的傲慢叙事，强调文化包容性（老祖向科学家请教相对论）；反派不设西方脸谱化恶人，而是文化自卑的东方叛徒。12万字。\n'
        },
    ],
    'NW_CLEAR_MEDIUM_BRAINY_ACTION': [
        {
            'query_id': 'M_BA_Q06',
            'source': '外部征集(泽坤) - 穿越科幻废土·提示词咒语·高维实验',
            'donator': '泽坤',
            'x_axis': ['B11谜', 'B8反抗'],
            'y_axis': ['科幻废土', '穿越'],
            'word_count': '150000',
            'query_text': '请为我构思一部穿越科幻废土小说。文明崩溃后，遍布蓝星的"灰尘级"微型机器人群成了废土仍能运转的底层基础设施，而所谓"咒语"不过是能被它们编译执行的提示词指令；一名来自现代的数据标注员穿越到此，意外破解咒语本质后开始从执行日志与失效样本中反推系统提示词，试图用这门"语言"重造一台时空机器，却在逼近真相时发现：这个世界其实是高维生物的长期实验，"发展大模型"只是触发收集与清算实验数据的开关，一旦文明走到那一步世界线就会被终止；为了让世界不被按下结束键，他不得不把自己变成最大的反派与策划者，亲手推动文明崩溃，让人类永远停在不会触发开关的安全阈值之下。15万字。\n'
        },
        {
            'query_id': 'M_BA_Q07',
            'source': '外部征集(狂暴腰突战士) - 明末·手搓膛线·工业革命',
            'donator': '狂暴腰突战士',
            'x_axis': ['B12获取', 'B30野心'],
            'y_axis': ['历史穿越', '基建种田'],
            'word_count': '150000',
            'query_text': '请为书名《大明：从手搓膛线开始工业革命》创作大纲内容，主角性格温吞，说话轻声细语，随身带着枸杞保温杯。最讨厌加班，最害怕打仗，看到杀鸡都会躲得远远的。在同僚眼中，他是个胸无大志、只想混到退休的"咸鱼"。他携带"近现代工业技术百科"穿越到明末。废除落后的手工作坊，建立标准化的流水线工厂，用物流与金融霸权重新定义大明国运。写作技巧：1.硬核金手指须有逻辑闭环，拒绝无脑升级；2.秩序重塑，通过科技引入重构世界规则；3.极速钩子，前500字抛悬念，3000字内完成"压抑-爆发"闭环；4.高智博弈，反派动机合理、手段狠辣；5.文本风格极致压缩形容词，高信息密度，穿插幽默日常。15万字。\n'
        },
        {
            'query_id': 'M_BA_Q08',
            'source': '外部征集(晓旭姐粉头子) - 反赌联盟·千王·心理博弈',
            'donator': '晓旭姐粉头子',
            'x_axis': ['A3复仇的罪', 'B11谜'],
            'y_axis': ['心理博弈', '现实向'],
            'word_count': '120000',
            'query_text': '《反赌联盟：千王的第101次出千》核心设定：曾是地下赌场"千王"的男主出狱后开面馆，前妻携子哭诉儿子被诱赌欠债，他重出江湖专挑害人赌场设局，却发现自己当年害死的赌徒正是儿子生父。写作手法：用概率学+心理学拆解赌博套路（如"连输后必赢"心理陷阱），每场赌局设计成心理博弈，最终用"自曝出千"直播摧毁赌博集团信用体系。避雷手法：严禁美化赌博/炫技出千，所有技术描写必须导向"十赌九诈"警示；主角不洗白，需直面过往罪孽并用余生赎罪。12万字。\n'
        },
        {
            'query_id': 'M_BA_Q09',
            'source': '外部征集(晓旭姐粉头子) - 重生1998·信息差·幕后推手',
            'donator': '晓旭姐粉头子',
            'x_axis': ['B12获取', 'F33错误判断'],
            'y_axis': ['重生商战', '年代文'],
            'word_count': '150000',
            'query_text': '《重生1998：我靠信息差当幕后推手》核心设定：2025年破产企业家重生回1998年，放弃直接抄答案，而是用"趋势预判"暗中扶持同学创业，自己甘当隐形操盘手。写作手法：用时代细节制造真实感（如98年网吧拨号上网速度、BP机通讯限制），主角所有操作必须符合当时技术条件，成功源于对人性的精准把握而非信息碾压。避雷手法：杜绝"先知打脸"爽文套路，主角多次因时代局限判断失误；避免神化主角，强调团队协作与时代机遇的共同作用。15万字。\n'
        },
    ],
    'NW_CLEAR_MEDIUM_ADVENTURE': [
        {
            'query_id': 'M_ADV_Q05',
            'source': '外部征集(泽坤) - 巨兽聚落·凡人拾荒者·深层探索',
            'donator': '泽坤',
            'x_axis': ['B9冒险事业', 'B11谜'],
            'y_axis': ['科幻冒险', '凡人流'],
            'word_count': '150000',
            'query_text': '宇宙中漂浮着星球级的远古巨兽尸体，人类在其表层建立聚落，靠挖掘内部器官（血管、神经、腺体）、激素等资源为生；巨兽体内存在"历史删减片段"——被宇宙抹除的文明遗迹，藏着失落科技与真相。主角：18岁底层拾荒者，身患"基因崩溃症"（三个月内必死），多年积累的生物解剖经验是他唯一的生存资本（凡人流，无系统）。在一次探索中被同行背叛推入深层器官，遭遇变异免疫细胞，利用巨兽生理知识反杀，但在绝境中误食神经液导致基因异变加剧（加速死亡），却获得"器官共鸣感知"能力。核心驱动：用卖掉深层资源的钱购买装备，深入传说中的"心脏迷宫"寻找"纯净基因核"治愈绝症，过程中逐步揭开巨兽身份、历史删减的真相。15万字。\n'
        },
        {
            'query_id': 'M_ADV_Q06',
            'source': '外部征集(晓旭姐粉头子) - 边关炊事兵·锅铲斩妖·穿越北宋',
            'donator': '晓旭姐粉头子',
            'x_axis': ['B9冒险事业', 'B8反抗'],
            'y_axis': ['穿越冒险', '军旅美食'],
            'word_count': '150000',
            'query_text': '《边关炊事兵：我的锅铲能斩妖》核心设定：现代退伍炊事兵穿越成北宋边军伙夫，发现妖魔惧怕"人间烟火气"，他用铁锅炒出带煞气的军粮，让士兵战力暴涨，却引来朝廷忌惮。写作手法：战斗场面用炊具替代刀剑（热油泼面破幻术、辣椒面制烟幕），将"吃饭"升华为文化认同符号，最终决战用百锅齐鸣唤醒边军集体意志。避雷手法：拒绝"战神秒天秒地"，所有胜利需付出代价（如主角永久失去味觉）；避免民族主义煽动，强调"守护具体的人"而非空洞口号。15万字。\n'
        },
        {
            'query_id': 'M_ADV_Q07',
            'source': '外部征集(晓旭姐粉头子) - 末日·流浪猫·伴生进化·废土王朝',
            'donator': '晓旭姐粉头子',
            'x_axis': ['B9冒险事业', 'B12获取'],
            'y_axis': ['末世生存', '伴生进化'],
            'word_count': '150000',
            'query_text': '末日爆发后，人类文明崩塌，主角开局只剩一只陪伴自己的流浪猫，在资源匮乏、基地博弈与异化生物围剿中，通过觉醒"伴生进化系统"与猫共享能力，从流浪求生一路发展到建立废土王朝（避雷：不单纯宠物流、不无限囤货、不配角脸谱化）。15万字。\n'
        },
    ],
}

for section_name, queries in new_queries.items():
    pools[section_name].extend(queries)

total_after = sum(len(qs) for qs in pools.values())

with open(filepath, 'w') as f:
    yaml.dump(data, f, allow_unicode=True, default_flow_style=False, sort_keys=False, width=1000)

# Verify
with open(filepath, 'r') as f:
    verify = yaml.safe_load(f)
v_pools = verify['query_pools']
v_total = sum(len(qs) for qs in v_pools.values())
print(f"Before: {total_before} -> After: {v_total} ({v_total - total_before} added)")
print(f"Sections: {len(v_pools)}")
for name, qs in v_pools.items():
    new_qs = [q for q in qs if 'donator' in q]
    if new_qs:
        print(f"  {name}: {len(qs)} (+{len(new_qs)} new)")
    else:
        print(f"  {name}: {len(qs)}")
print("YAML VALID: YES")
