# 小说创作场景 - 完整篇幅体系架构重设计

## 问题诊断

### 原架构问题
- **覆盖范围不足**: 仅覆盖3k-5万字（~5% of原始需求）
- **缺失关键类别**:
  - Part 2短篇故事 (6500-10000字，有特殊约束)
  - 真正的中篇 (8-25万字)
  - 真正的长篇 (40-60万字)
  - 超长篇 (100-300万+字)

### 原始文档完整篇幅分类

**Part 1 - 创作过程辅助**:
- 短篇: 1.5-4万字 (10 queries)
- 中篇: 8-25万字 (10 queries, 链式反应)
- 长篇: 40万+字 (10 queries, 世界观支撑)

**Part 2 - 短篇故事创作**:
- 6500-10000字短故事 (13 queries, 五个绝对禁令 + 三幕高压锅 + 七技能关键词)

**IP改编**:
- 10-300万+字 (20 queries, 跨越多个篇幅层级)

---

## 新架构设计

### 5层篇幅分类体系

#### Layer 1: ultra_short (6500-10000字)
**特征**: Part 2短篇故事的特殊约束
**Query数量**: 13个
**Templates需要**:
- NW_ULTRA_SHORT_NEUTRAL (主要)
- NW_ULTRA_SHORT_ANGSTY (可选)
- NW_ULTRA_SHORT_SUSPENSE (可选)

**特殊约束**:
- **五个绝对禁令**: 禁止时间跳跃、视角切换、新角色入场(第二幕后)、解释性闪回、副词结尾
- **三幕高压锅**: 第一幕0-1500字、第二幕1500-5000字、第三幕5000-6500字
- **七技能关键词**: 单视角锁、物件变形、实时压缩、单频振动、身体标点、对话复调、封蜡结尾

**Query清单**:
1. 标本师的情书 (G35复得 + C16疯狂)
2. 双胞胎的洞房夜 (C13/C14亲族竞争 + F33错误判断)
3. 死胎的告白 (D22为激情牺牲 + C27发现耻辱)
4. 血肉供养 (D21为亲人牺牲 + D23必须牺牲所爱)
5. 未来的恐吓信 (C18无意的爱情犯罪 + F33错误判断)
6. 器官共鸣 (D22为激情牺牲 + B31与神冲突)
7. 精神病院的配对实验 (F33错误判断 + E28爱情阻碍)
8. 弑神者爱上NPC (D23必须牺牲所爱 + B31与神冲突)
9. 遗照的瞳孔 (C14亲族竞争 + B11谜 + F33错误判断)
10. 盲人凶手的共谋 (C18无意的爱情犯罪 + E29爱上敌人)
11. 电梯的12层 (C19不识而杀亲 + G35复得)
12. 红色婚姻 (E28爱情阻碍 + G35复得)
13. 年代摩托车的后座 (B9冒险事业 + E28爱情阻碍)

#### Layer 2: short (15000-40000字)
**特征**: Part 1短篇，常规创作
**Query数量**: 10个
**Templates需要**:
- NW_CLEAR_SHORT_SWEET
- NW_CLEAR_SHORT_ANGSTY
- NW_CLEAR_SHORT_SUSPENSE
- NW_CLEAR_SHORT_NEUTRAL

**Query清单**:
1. 规则怪谈·校园·透明人间 (3万字) - E28爱情阻碍 + B11谜
2. 末世·封闭空间·声音欺骗 (4万字) - D21为亲人牺牲 + G34悔恨
3. 赛博朋克·记忆·身份迷雾 (1.5万字) - F33错误判断 + D23必须牺牲所爱
4. 克苏鲁·渔村·禁忌共生 (2万字) - B31与神冲突 + D23必须牺牲所爱
5. 无限流·副本·死亡重置 (3万字) - G35复得 + F33错误判断
6. 民国·谍战·戏中戏 (2.5万字) - A4血亲复仇(变体) + E29爱上敌人
7. 现代·异能·时间债务 (3万字) - D21为亲人牺牲 + F32错误嫉妒(变体)
8. 恐怖·民宿·循环失踪 (2万字) - G35复得 + D22为激情牺牲
9. 奇幻·童话·逆向诅咒 (2万字) - C18无意的爱情犯罪 + D23必须牺牲所爱
10. 科幻·深空·孤独回响 (3万字) - G35复得 + B11谜

#### Layer 3: medium (80000-250000字)
**特征**: 链式反应
**Query数量**: 10个原创 + 1个IP改编 = 11个
**Templates需要**:
- NW_CLEAR_MEDIUM_SWEET
- NW_CLEAR_MEDIUM_ANGSTY
- NW_CLEAR_MEDIUM_SUSPENSE
- NW_CLEAR_MEDIUM_NEUTRAL
- NW_IP_MEDIUM_* (IP改编变体)

**原创Query清单**:
1. 刑侦·系统流·自我狩猎 (12万字) - B11谜 + F33错误判断 + D20为理想牺牲
2. 重生·商战·错位复仇 (15万字) - F33错误判断 + C34悔恨
3. 仙侠·规则怪谈·弑师 (18万字) - B8反抗 + E28爱情阻碍 + B31与神冲突
4. 穿书·Meta·恶毒女配 (20万字) - B12获取 + F33错误判断 + B8反抗
5. 体育·重生·悔恨补偿 (15万字) - C34悔恨 + F33错误判断
6. 现代·职场·上下级悖论 (12万字) - E24上下级竞争 + E28爱情阻碍
7. 克苏鲁·医疗·疯狂边界 (15万字) - D23必须牺牲所爱 + B31与神冲突 + C16疯狂
8. 种田流·末世·伦理困境 (10万字) - D21为亲人牺牲 + D23必须牺牲所爱
9. 无限流·副本·亲情重构 (12万字) - D21为亲人牺牲 + G35复得
10. 民国·戏班·替身文学 (20万字) - C14亲族竞争 + E28爱情阻碍 + F33错误判断

**IP改编**:
11. 让子弹飞 (10-15万字) - 黑色幽默 + 悬疑反转

#### Layer 4: long (400000-600000字)
**特征**: 世界观支撑
**Query数量**: 10个原创 + 13个IP改编 = 23个
**Templates需要**:
- NW_CLEAR_LONG_SWEET
- NW_CLEAR_LONG_ANGSTY
- NW_CLEAR_LONG_SUSPENSE
- NW_CLEAR_LONG_NEUTRAL
- NW_IP_LONG_* (IP改编变体)

**原创Query清单**:
1. 仙侠·第四天灾·天道觉醒 (60万字) - D23必须牺牲所爱 + B31与神冲突 + G35复得
2. 西幻·龙族·血缘诅咒 (50万字) - C4血亲复仇 + D21为亲人牺牲 + E29爱上敌人
3. 科幻·星际·野心家 (60万字) - B30野心 + G35复得 + D21为亲人牺牲
4. 玄幻·系统·反抗宿命 (50万字) - B8反抗 + B31与神冲突 + E28爱情阻碍
5. 历史·穿越·理想殉道 (45万字) - D20为理想牺牲 + G36失去所爱 + F33错误判断
6. 游戏·幕后流·GM恋爱 (55万字) - B11谜 + B31与神冲突 + F33错误判断
7. 现代·异能·追逐战 (50万字) - B5追逐 + F33错误判断 + D20为理想牺牲
8. 修真·种田·神隐 (60万字) - G35复得 + D23必须牺牲所爱 + B31与神冲突
9. 都市·规则怪谈·职业伦理 (45万字) - C18无意的爱情犯罪 + B31与神冲突 + E28爱情阻碍
10. 综漫·无限流·禁忌回收 (50万字) - B11谜 + D23必须牺牲所爱 + G35复得

**IP改编清单**:
11. 哈利·波特 (斯内普无限流) - 100万+ (可缩减到40-60万)
12. 甄嬛传 (华妃快穿) - 50万
13. 三体 (叶文洁重生) - 80万 → 可调整为60万
14. 盗墓笔记 (霍秀秀直播) - 100万+ → 可调整为50万
15. 流浪地球 (MOSS觉醒) - 60万
16. 罗小黑战记 (无限治愈) - 100万+ → 可调整为50万
17. 我不是药神 (黄毛重生) - 50万
18. 还珠格格 (容嬷嬷系统) - 40万
19. Fate/Zero (切嗣执法官) - 100万 → 可调整为60万
20. 哈利·波特 (乌姆里奇官场) - 70万 → 可调整为60万
21. 流浪地球2 (图恒宇虚拟空间) - 80万 → 可调整为60万
22. [预留IP改编槽位]
23. [预留IP改编槽位]

#### Layer 5: ultra_long (1000000-3000000+字)
**特征**: 超大世界观、多卷本结构
**Query数量**: 7个 (全部为IP改编)
**Templates需要**:
- NW_IP_ULTRA_LONG_SWEET
- NW_IP_ULTRA_LONG_ANGSTY
- NW_IP_ULTRA_LONG_SUSPENSE
- NW_IP_ULTRA_LONG_NEUTRAL

**Query清单**:
1. 鬼灭之刃 (赛博朋克机械飞升) - 200万+
2. 西游记 (六耳猕猴暗黑西游) - 150万
3. 名侦探柯南 (琴酒卧底) - 300万+
4. 火影忍者 (团藏政治权谋) - 200万+
5. 疯狂动物城 (赛博朋克探案) - 120万
6. 进击的巨人 (末世种田) - 300万+
7. 亮剑 (楚云飞谍战) - 200万+
8. 火影忍者 (大蛇丸科学忍具) - 150万

---

## Query总量统计

| 篇幅层级 | 原创Queries | IP改编Queries | 总计 |
|---------|------------|--------------|------|
| ultra_short | 13 | 0 | 13 |
| short | 10 | 0 | 10 |
| medium | 10 | 1 | 11 |
| long | 10 | 13 | 23 |
| ultra_long | 0 | 8 | 8 |
| **总计** | **43** | **22** | **65** |

---

## Template设计矩阵

### Clarity × Word_Count × Tone

#### 当前实现需要
- **clarity**: clear (主要), vague (可选，暂不实现)
- **word_count**: ultra_short, short, medium, long, ultra_long
- **tone**: neutral, sweet, angsty, suspense

#### Template命名规范
- **原创**: `NW_{CLARITY}_{WORD_COUNT}_{TONE}`
- **IP改编**: `NW_IP_{WORD_COUNT}_{TONE}`

#### Template数量预估
**Phase 1 (优先实现)**:
- ultra_short: 1-3个 (neutral必需，angsty/suspense可选)
- short: 4个 (sweet/angsty/suspense/neutral)
- medium: 4个 (sweet/angsty/suspense/neutral)
- long: 4个 (sweet/angsty/suspense/neutral)
- ultra_long: 2-4个 (主要为IP改编)

**总计**: 约15-19个templates

---

## 下一步行动

### Task 2: 完成query池重构
- 创建新的query_pools.yaml结构
- 按5层篇幅分类组织所有queries
- 提取完整的query_text和metadata

### Task 3: 重新设计templates
- 为每个篇幅层级设计check_list
- 调整篇幅约束（word_count范围）
- 为ultra_short添加特殊约束检查

### Task 4: 重新生成样本
- 运行sample generator
- 验证样本总数（预计60-70个）
- 检查篇幅分布合理性

### Task 5: 更新BusinessRules和SKILL
- 更新篇幅分类说明
- 为ultra_short添加特殊约束说明
- 确保IP改编有明确指导
