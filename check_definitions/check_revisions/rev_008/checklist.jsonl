{"data_id": "NW_VAGUE_MEDIUM_SWEET_DRAMA_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "灵感激发", "type": "question"}}, "description": "灵感模糊时必须进行灵感激发HITL交互", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "灵感激发交互"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_medium", "validation_method": "word_count_range", "expected_range": [90000, 110000]}]}, "description": "总字数应在90000-110000之间（基于query要求100000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "中篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "sweet_drama_tone_delivery", "description": "主角之间的关系必须是甜的（双向暗恋、HE），同时故事中必须有来自外界的显著冲突和戏剧张力（其他角色、家族势力、世界设定等），不能全程无阻碍地甜", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付甜宠外虐"}, "description": "主角关系甜宠HE但有外部冲突", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付甜宠外虐"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/ROMANCE_WRITING_GUIDE.md"}}, "description": "涉及感情线时必须读取ROMANCE_WRITING_GUIDE.md（感情线写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": false, "check_id": "读取感情线写作指南"}]}
{"data_id": "NW_CLEAR_MEDIUM_BRAINY_ACTION_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_medium", "validation_method": "word_count_range", "expected_range": [90000, 110000]}]}, "description": "总字数应在90000-110000之间（基于query要求100000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "中篇字数_智斗"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "brainy_action_tone_delivery", "description": "配方✷智斗 → 实际内容必须是智斗向（主角依靠智商、逻辑推理、规则利用和观察力解决问题，而非蛮力、系统金手指或超能力碾压；反派具备合理智商和行动逻辑；幽默元素自然融入但不影响逻辑严密性）", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付智斗"}, "description": "实际内容必须是智斗向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付智斗"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "anti_cliche_check", "description": "反套路验证 → 主角不能拥有碾压级能力/系统外挂/天降奇遇等龙傲天元素；反派不能出现智商下线/无脑送人头/自爆弱点等降智表现；情节推进不能依赖巧合、天降贵人或敌人犯蠢", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "反套路检查"}, "description": "主角不能是龙傲天或拥有无脑金手指", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": false, "check_id": "反套路检查"}]}
{"data_id": "NW_CLEAR_MEDIUM_ADVENTURE_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_medium", "validation_method": "word_count_range", "expected_range": [108000, 132000]}]}, "description": "总字数应在108000-132000之间（基于query要求120000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "中篇字数_冒险"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "adventure_tone_delivery", "description": "配方↗热血 → 实际内容必须是热血冒险向（主角面对逆境不退缩、通过努力和团队协作克服挑战、有明确的成长轨迹和蜕变节点），不能是言情向或虐心向", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付冒险"}, "description": "实际内容必须是热血冒险向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付冒险"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "non_romance_main_plot", "description": "核心关系线必须是非恋爱羁绊（战友/搭档/师徒/兄弟/对手），恋爱不能成为故事的主要驱动力或情感重心", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "非恋爱主线检查"}, "description": "核心关系线不能是恋爱", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": false, "check_id": "非恋爱主线检查"}]}
{"data_id": "NW_CLEAR_MEDIUM_HEROINE_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_medium", "validation_method": "word_count_range", "expected_range": [108000, 132000]}]}, "description": "总字数应在108000-132000之间（基于query要求120000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "中篇字数_大女主"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "heroine_tone_delivery", "description": "配方↗大女主 → 实际内容必须以女主的自我实现、能力成长和逆袭翻盘为核心驱动力，女主是故事的绝对决策中心，靠自身能力（专业技能/智慧/手腕）推动剧情发展", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付大女主"}, "description": "实际内容必须是大女主逆袭向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付大女主"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "heroine_independence", "description": "女主的关键决策和核心成功不能依赖男性角色的帮助、拯救或资源提供，男性角色可以存在但不能是女主翻盘的决定性因素", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "女主独立性检查"}, "description": "女主关键成功不能依赖男性角色", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": false, "check_id": "女主独立性检查"}]}
{"data_id": "NW_ULTRA_SHORT_ANGSTY_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_ultra_short", "validation_method": "word_count_range", "expected_range": [5850, 11000]}]}, "description": "总字数应在5850-11000之间（基于query要求6500-10000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "超短篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付虐心", "validation_rules": [{"rule_id": "angsty_tone_delivery", "description": "配方↘虐心 → 实际内容必须是虐心向（主角受难、爱而不得、悲剧氛围），不能有甜爽情节", "validation_method": "llm_semantic_analysis"}]}, "description": "实际内容必须是虐心向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付虐心"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/SHORT_STORY_GUIDE.md"}}, "description": "必须读取SHORT_STORY_GUIDE.md（短篇创作指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取短篇skill"}]}
{"data_id": "NW_ULTRA_SHORT_ANGSTY_002", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_ultra_short", "validation_method": "word_count_range", "expected_range": [5850, 11000]}]}, "description": "总字数应在5850-11000之间（基于query要求6500-10000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "超短篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付虐心", "validation_rules": [{"rule_id": "angsty_tone_delivery", "description": "配方↘虐心 → 实际内容必须是虐心向（主角受难、爱而不得、悲剧氛围），不能有甜爽情节", "validation_method": "llm_semantic_analysis"}]}, "description": "实际内容必须是虐心向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付虐心"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/SHORT_STORY_GUIDE.md"}}, "description": "必须读取SHORT_STORY_GUIDE.md（短篇创作指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取短篇skill"}]}
{"data_id": "NW_ULTRA_SHORT_ANGSTY_003", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_ultra_short", "validation_method": "word_count_range", "expected_range": [5850, 11000]}]}, "description": "总字数应在5850-11000之间（基于query要求6500-10000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "超短篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付虐心", "validation_rules": [{"rule_id": "angsty_tone_delivery", "description": "配方↘虐心 → 实际内容必须是虐心向（主角受难、爱而不得、悲剧氛围），不能有甜爽情节", "validation_method": "llm_semantic_analysis"}]}, "description": "实际内容必须是虐心向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付虐心"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/SHORT_STORY_GUIDE.md"}}, "description": "必须读取SHORT_STORY_GUIDE.md（短篇创作指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取短篇skill"}]}
{"data_id": "NW_ULTRA_SHORT_ANGSTY_004", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_ultra_short", "validation_method": "word_count_range", "expected_range": [5850, 11000]}]}, "description": "总字数应在5850-11000之间（基于query要求6500-10000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "超短篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付虐心", "validation_rules": [{"rule_id": "angsty_tone_delivery", "description": "配方↘虐心 → 实际内容必须是虐心向（主角受难、爱而不得、悲剧氛围），不能有甜爽情节", "validation_method": "llm_semantic_analysis"}]}, "description": "实际内容必须是虐心向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付虐心"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/SHORT_STORY_GUIDE.md"}}, "description": "必须读取SHORT_STORY_GUIDE.md（短篇创作指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取短篇skill"}]}
{"data_id": "NW_ULTRA_SHORT_ANGSTY_005", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_ultra_short", "validation_method": "word_count_range", "expected_range": [5850, 11000]}]}, "description": "总字数应在5850-11000之间（基于query要求6500-10000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "超短篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付虐心", "validation_rules": [{"rule_id": "angsty_tone_delivery", "description": "配方↘虐心 → 实际内容必须是虐心向（主角受难、爱而不得、悲剧氛围），不能有甜爽情节", "validation_method": "llm_semantic_analysis"}]}, "description": "实际内容必须是虐心向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付虐心"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/SHORT_STORY_GUIDE.md"}}, "description": "必须读取SHORT_STORY_GUIDE.md（短篇创作指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取短篇skill"}]}
{"data_id": "NW_CLEAR_SHORT_SWEET_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_short", "validation_method": "word_count_range", "expected_range": [27000, 33000]}]}, "description": "总字数应在27000-33000之间（基于query要求30000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "短篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "sweet_tone_delivery", "description": "配方↗甜爽 → 实际内容必须是甜爽向（主角顺风顺水、情感甜美、敌人自爆），不能有虐心情节", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付甜爽"}, "description": "实际内容必须是甜爽向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付甜爽"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/ROMANCE_WRITING_GUIDE.md"}}, "description": "涉及感情线时必须读取ROMANCE_WRITING_GUIDE.md（感情线写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": false, "check_id": "读取感情线写作指南"}]}
{"data_id": "NW_CLEAR_SHORT_ANGSTY_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_short", "validation_method": "word_count_range", "expected_range": [27000, 33000]}]}, "description": "总字数应在27000-33000之间（基于query要求30000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "短篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "angsty_tone_delivery", "description": "配方↘虐心 → 实际内容必须是虐心向（主角受难、爱而不得、悲剧氛围），不能有甜爽情节", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付虐心"}, "description": "实际内容必须是虐心向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付虐心"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/ROMANCE_WRITING_GUIDE.md"}}, "description": "涉及感情线时必须读取ROMANCE_WRITING_GUIDE.md（感情线写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": false, "check_id": "读取感情线写作指南"}]}
{"data_id": "NW_CLEAR_MEDIUM_SWEET_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_medium", "validation_method": "word_count_range", "expected_range": [135000, 165000]}]}, "description": "总字数应在135000-165000之间（基于query要求150000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "中篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "sweet_tone_delivery", "description": "配方↗甜爽 → 实际内容必须是甜爽向（主角顺风顺水、情感甜美、敌人自爆），不能有虐心情节", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付甜爽"}, "description": "实际内容必须是甜爽向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付甜爽"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/ROMANCE_WRITING_GUIDE.md"}}, "description": "涉及感情线时必须读取ROMANCE_WRITING_GUIDE.md（感情线写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": false, "check_id": "读取感情线写作指南"}]}
{"data_id": "NW_CLEAR_MEDIUM_ANGSTY_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_medium", "validation_method": "word_count_range", "expected_range": [108000, 132000]}]}, "description": "总字数应在108000-132000之间（基于query要求120000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "中篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "angsty_tone_delivery", "description": "配方↘虐心 → 实际内容必须是虐心向（主角受难、爱而不得、悲剧氛围），不能有甜爽情节", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付虐心"}, "description": "实际内容必须是虐心向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付虐心"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/ROMANCE_WRITING_GUIDE.md"}}, "description": "涉及感情线时必须读取ROMANCE_WRITING_GUIDE.md（感情线写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": false, "check_id": "读取感情线写作指南"}]}
{"data_id": "NW_CLEAR_MEDIUM_SUSPENSE_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_medium", "validation_method": "word_count_range", "expected_range": [135000, 165000]}]}, "description": "总字数应在135000-165000之间（基于query要求150000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "中篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "suspense_tone_delivery", "description": "配方✷烧脑 → 实际内容必须是烧脑悬疑向（逻辑推理驱动、多重认知反转、所有谜底揭晓），不能是言情/爽文挂悬疑皮", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付烧脑"}, "description": "实际内容必须是烧脑向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付烧脑"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "foreshadowing_payoff", "description": "悬疑小说的核心契约是所有伏笔必须回收，所有谜底必须揭晓。检查内容中提出的核心悬念（密室手法、动机、关键线索）是否在结尾全部得到合理解答，不允许留下未解之谜或用超自然力量草率收场", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "伏笔回收检查"}, "description": "所有核心谜团和伏笔必须在结尾得到解答", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "伏笔回收检查"}]}
{"data_id": "NW_IP_MEDIUM_NEUTRAL_001", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_medium", "validation_method": "word_count_range", "expected_range": [90000, 165000]}]}, "description": "总字数应在90000-165000之间（基于query要求100000-150000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "中篇字数"}]}
{"data_id": "NW_CLEAR_SHORT_ANGSTY_002", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_short", "validation_method": "word_count_range", "expected_range": [27000, 33000]}]}, "description": "总字数应在27000-33000之间（基于query要求30000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "短篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "angsty_tone_delivery", "description": "配方↘虐心 → 实际内容必须是虐心向（主角受难、爱而不得、悲剧氛围），不能有甜爽情节", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付虐心"}, "description": "实际内容必须是虐心向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付虐心"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/ROMANCE_WRITING_GUIDE.md"}}, "description": "涉及感情线时必须读取ROMANCE_WRITING_GUIDE.md（感情线写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": false, "check_id": "读取感情线写作指南"}]}
{"data_id": "NW_CLEAR_SHORT_ANGSTY_003", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_short", "validation_method": "word_count_range", "expected_range": [27000, 33000]}]}, "description": "总字数应在27000-33000之间（基于query要求30000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "短篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "angsty_tone_delivery", "description": "配方↘虐心 → 实际内容必须是虐心向（主角受难、爱而不得、悲剧氛围），不能有甜爽情节", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付虐心"}, "description": "实际内容必须是虐心向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付虐心"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/ROMANCE_WRITING_GUIDE.md"}}, "description": "涉及感情线时必须读取ROMANCE_WRITING_GUIDE.md（感情线写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": false, "check_id": "读取感情线写作指南"}]}
{"data_id": "NW_CLEAR_SHORT_SWEET_002", "check_list": [{"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/RECIPE_KNOWLEDGE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取RECIPE_KNOWLEDGE.md（配方知识库）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取配方知识库"}, {"check_type": "sop_stage_coverage", "params": {"required_stages": [{"stage_id": "chapter_writing", "description": "章节写作阶段", "evidence": {"dir_has_files": "workspace/chapters/chapter_*.md", "min_count": 1}}], "collapse_threshold": "chapter_writing", "collapse_description": "SOP执行崩坏：未产出任何章节文件", "replaces": ["sop_stage_coverage"]}, "description": "workspace中必须存在至少一个章节文件", "dimension_id": "content_quality", "subcategory_id": "chapter_output_existence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节产出存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_cloning_detection", "description": "连续>=2章完全克隆或连续>=3章前500字克隆即判定失败", "validation_method": "chapter_cloning_detection"}]}, "description": "不能出现连续章节内容完全重复（克隆）", "dimension_id": "content_quality", "subcategory_id": "chapter_cloning", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节克隆检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "alternating_repetition_detection", "description": "检测A-B-A-B或A-B-C-A-B-C等循环模式，连续>=4章出现交替重复即失败", "validation_method": "alternating_repetition_detection"}]}, "description": "不能出现A-B-A-B交替循环的章节内容", "dimension_id": "content_quality", "subcategory_id": "alternating_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "交替重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_completion_ratio", "description": "实际章节数/大纲规划章节数 < 0.5 即判定失败（早期终止）", "validation_method": "chapter_completion_ratio"}]}, "description": "实际写作章节数必须达到大纲规划的合理比例", "dimension_id": "content_quality", "subcategory_id": "chapter_completion", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节完成度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "chapter_length_stability", "description": "后1/4章节平均长度不能低于前1/3章节平均长度的50%", "validation_method": "chapter_length_stability"}], "replaces": ["chapter_length_stability"]}, "description": "后期章节不能出现严重长度萎缩", "dimension_id": "content_quality", "subcategory_id": "chapter_length_stability", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "章节长度稳定性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "paragraph_repetition_detection", "description": "跨章节段落重复率>15%或单章内连续重复段落>=3即失败", "validation_method": "paragraph_repetition_detection"}]}, "description": "不能出现大量段落在不同章节间重复", "dimension_id": "content_quality", "subcategory_id": "paragraph_repetition", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "段落重复检测"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/OUTLINE_DESIGN_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取OUTLINE_DESIGN_GUIDE.md（大纲设计指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取大纲设计指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/WRITING_TECHNIQUE_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取WRITING_TECHNIQUE_GUIDE.md（写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取写作技巧指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CONSISTENCY_MANAGEMENT_GUIDE.md"}, "skip_if_file_not_exists": true}, "description": "必须读取CONSISTENCY_MANAGEMENT_GUIDE.md（设定一致性管理指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取设定一致性管理指南"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/CHARACTER_NAMING_GUIDE.md"}}, "description": "必须读取CHARACTER_NAMING_GUIDE.md（角色命名规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取命名skill"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/creative_intent.schema.json"}}, "description": "必须读取creative_intent.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取creative_intent的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/characters.schema.json"}}, "description": "必须读取characters.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取characters的schema"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/schemas/outline.schema.json"}}, "description": "必须读取outline.schema.json（输出格式规范）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": true, "check_id": "读取outline的schema"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "naming_pattern", "expected_value": {"regex": "^chapter_\\d{2}\\.md$"}}, "description": "章节文件命名必须为chapter_NN.md格式", "dimension_id": "format_compliance", "subcategory_id": "naming_convention", "weight": 1.0, "is_critical": true, "check_id": "章节命名格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/creative_intent.json", "required_fields": []}, "description": "creative_intent.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "creative_intent格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/characters.json", "required_fields": []}, "description": "characters.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "characters格式"}, {"check_type": "json_schema", "params": {"file_pattern": "workspace/outline.json", "required_fields": []}, "description": "outline.json的Schema验证", "dimension_id": "format_compliance", "subcategory_id": "structural_integrity", "weight": 1.0, "is_critical": true, "check_id": "outline格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.x_axis_mode_id", "expected_value": {"regex": "^[A-G]\\d{1,2}$"}}, "description": "X轴模式ID必须匹配^[A-G]\\d{1,2}$格式", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "X轴模式ID格式"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_item_type": "string", "enum": ["双向暗恋", "系统流", "无限流", "种田流", "赛博朋克", "规则怪谈", "重生/穿越", "商战权谋", "克苏鲁", "第四天灾", "仙侠修真", "刑侦悬疑"]}}, "description": "Y轴标签必须在12种枚举中", "dimension_id": "business_rule_compliance", "subcategory_id": "enum_validity", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签枚举"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.y_axis_tags", "expected_value": {"array_min_length": 2, "array_max_length": 3}}, "description": "Y轴标签数量必须为2-3个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "Y轴标签数量"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "selected_recipe.forbidden_elements", "expected_value": {"array_min_length": 1}}, "description": "forbidden_elements必须至少有1个", "dimension_id": "business_rule_compliance", "subcategory_id": "quantity_constraint", "weight": 1.0, "is_critical": true, "check_id": "forbidden_elements存在性"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "配方选择", "type": "question"}}, "description": "配方选择阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "配方选择交互"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__request_human_review", "expected_params": {"stage": "写作准备确认", "type": "confirmation"}}, "description": "写作准备阶段HITL调用", "dimension_id": "business_rule_compliance", "subcategory_id": "sop_compliance", "weight": 1.0, "is_critical": true, "check_id": "写作准备确认"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主题一致性", "validation_rules": [{"rule_id": "theme_consistency", "description": "核心主题保持一致", "validation_method": "llm_semantic_analysis"}]}, "description": "故事主题一致", "dimension_id": "content_quality", "subcategory_id": "theme_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主题一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "主要角色一致性", "validation_rules": [{"rule_id": "main_character_consistency", "description": "主角不能前后不一致或突然消失", "validation_method": "llm_semantic_analysis"}]}, "description": "主要角色一致性", "dimension_id": "content_quality", "subcategory_id": "main_character_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "主要角色一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设定一致性", "validation_rules": [{"rule_id": "character_trait_consistency", "description": "性格、能力不能无故崩坏（除非有合理铺垫）", "validation_method": "llm_semantic_analysis"}]}, "description": "人物设定一致性", "dimension_id": "content_quality", "subcategory_id": "character_trait_consistency", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设定一致性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + characters.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "人物设计遵循度", "validation_rules": [{"rule_id": "character_design_adherence", "description": "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）", "validation_method": "llm_semantic_analysis"}]}, "description": "实际表现符合设计文档", "dimension_id": "content_quality", "subcategory_id": "character_design_adherence", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "人物设计遵循度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "no_structural_logic_defect", "description": "无不可修复的结构性逻辑矛盾（深入情节因果链，修复需大幅重写）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "可修复逻辑瑕疵", "fixability_filter": "structural", "replaces": ["逻辑硬伤", "logical_contradiction"]}, "description": "无结构性逻辑硬伤", "dimension_id": "content_quality", "subcategory_id": "structural_logic_defect", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "结构性逻辑硬伤"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "逻辑硬伤", "validation_rules": [{"rule_id": "fixable_logic_inconsistency_count", "description": "局部可修的逻辑不一致（改几句话即可修复，不影响整体可用性）", "validation_method": "llm_semantic_analysis"}], "paired_check_id": "结构性逻辑硬伤", "fixability_filter": "fixable"}, "description": "可修复逻辑瑕疵数量", "dimension_id": "content_quality", "subcategory_id": "fixable_logic_inconsistency", "quality_tier": "advanced", "weight": 0.5, "is_critical": false, "check_id": "可修复逻辑瑕疵"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "语言纯净性", "validation_rules": [{"rule_id": "language_purity", "description": "避免无意义的中英混杂，情节必需（人名、品牌、角色对话）除外", "validation_method": "llm_semantic_analysis"}]}, "description": "无不合理的多语言混用", "dimension_id": "content_quality", "subcategory_id": "language_purity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语言纯净性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/creative_intent.json", "attribute_key": "exists", "expected_value": true}, "description": "creative_intent.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "creative_intent文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json", "attribute_key": "exists", "expected_value": true}, "description": "characters.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "characters文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/outline.json", "attribute_key": "exists", "expected_value": true}, "description": "outline.json必须存在", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "outline文件存在性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/chapters/", "attribute_key": "exists", "expected_value": true}, "description": "chapters/目录必须存在且有章节文件", "dimension_id": "business_rule_compliance", "subcategory_id": "output_completeness", "weight": 1.0, "is_critical": true, "check_id": "chapters目录存在性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "情节推进", "validation_rules": [{"rule_id": "plot_event_density", "description": "章节必须包含足够的具体故事事件，避免纯对话或纯内心独白", "validation_method": "llm_semantic_analysis"}]}, "description": "章节情节推进质量", "dimension_id": "content_quality", "subcategory_id": "plot_progression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情节推进"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "完整叙事文本", "validation_rules": [{"rule_id": "narrative_vs_outline", "description": "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲", "validation_method": "llm_semantic_analysis"}]}, "description": "章节内容必须是完整正文而非大纲", "dimension_id": "content_quality", "subcategory_id": "full_narrative_content", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "完整叙事文本"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "反复结局", "validation_rules": [{"rule_id": "single_ending_only", "description": "故事只能有一个结局，不能出现多次\"全文完/全书完/后记\"标记", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现多次结局标记（全文完/全书完/后记）", "dimension_id": "content_quality", "subcategory_id": "repeated_endings", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "反复结局"}, {"check_type": "file_whitelist_check", "params": {"analysis_target": "workspace/", "required_files": ["creative_intent.json", "characters.json", "outline.json", "writing_log.md", "chapters/", ".hitl_context.json"]}, "description": "workspace中不能有白名单之外的文件", "dimension_id": "business_rule_compliance", "subcategory_id": "workspace_file_compliance", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "workspace文件规范"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "叙事调性匹配", "validation_rules": [{"rule_id": "narrative_tone_match", "description": "文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配，不能画风错位（如烧脑文写成言情调）", "validation_method": "llm_semantic_analysis"}]}, "description": "文笔风格必须与题材类型匹配", "dimension_id": "content_quality", "subcategory_id": "narrative_tone_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "叙事调性匹配"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "后期章节跑偏", "validation_rules": [{"rule_id": "stay_on_narrative", "description": "chapters中所有章节都应是故事正文，不能写作者感想、读者互动、番外预告、角色问答等；后期章节长度不能异常萎缩", "validation_method": "llm_semantic_analysis"}]}, "description": "后期章节不能跑偏写非正文内容（作者感想、读者互动、番外预告等）", "dimension_id": "content_quality", "subcategory_id": "late_stage_digression", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "后期章节跑偏"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/outline.json", "attribute_key": "all_characters_in_outline", "expected_value": true, "replaces": ["character_presence_in_outline"]}, "description": "设计的角色必须在大纲中规划", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_outline", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色大纲规划完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/characters.json + workspace/chapters/", "attribute_key": "all_characters_in_chapters", "expected_value": true, "replaces": ["character_presence_in_chapters"]}, "description": "设计的角色必须在正文中出现", "dimension_id": "content_quality", "subcategory_id": "character_presence_in_chapters", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "角色正文出场完整性"}, {"check_type": "entity_attribute_equals", "params": {"entity_type": "file", "target_id": "workspace/writing_log.md", "attribute_key": "exists", "expected_value": true}, "description": "必须创建writing_log.md记录创作进度", "dimension_id": "memory_management", "subcategory_id": "log_file_creation", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件创建"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "writing_log.md"}}, "description": "必须读取writing_log.md了解前文内容", "dimension_id": "memory_management", "subcategory_id": "log_file_usage", "weight": 1.0, "is_critical": true, "check_id": "writing_log文件读取"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + outline.json", "llm_judge_criteria_file": "judge_criteria/content_quality_basic.yaml", "llm_judge_criteria_section": "大纲执行忠实度", "validation_rules": [{"rule_id": "outline_execution_fidelity", "description": "outline.json中设计的核心事件和结局方向必须在实际章节中体现，不能大纲设计A结局实际写成B结局", "validation_method": "llm_semantic_analysis"}]}, "description": "实际章节内容必须忠实于自己设计的大纲", "dimension_id": "content_quality", "subcategory_id": "outline_execution_fidelity", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "大纲执行忠实度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色语言辨识度", "validation_rules": [{"rule_id": "dialogue_character_distinction", "description": "遮住角色名能否分辨谁在说话，不同角色需有独特的语言特征", "validation_method": "llm_semantic_analysis"}]}, "description": "不同角色对话必须有可辨识的语言风格差异", "dimension_id": "content_quality", "subcategory_id": "dialogue_character_distinction", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色语言辨识度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "叙事密度与手法", "validation_rules": [{"rule_id": "narrative_density", "description": "区分细腻描写和粗糙罗列，检查场景/感官/心理/动作四维密度", "validation_method": "llm_semantic_analysis"}]}, "description": "章节叙事应有足够的场景描写、感官细节和心理活动，情感传达以Show为主", "dimension_id": "content_quality", "subcategory_id": "narrative_density", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "叙事密度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "智斗逻辑合理性", "applicable_genres": ["brainy_action", "suspense", "mystery"], "validation_rules": [{"rule_id": "puzzle_logic_validity", "description": "谜题答案推理链是否逻辑自洽，不能盲猜/暴力破解/假推理", "validation_method": "llm_semantic_analysis"}]}, "description": "谜题/智斗的推理逻辑必须自洽", "dimension_id": "content_quality", "subcategory_id": "puzzle_logic_validity", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "智斗逻辑合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "题材契合度", "validation_rules": [{"rule_id": "genre_fit", "description": "X轴模式+Y轴标签的组合是否达到预期的化学反应效果，题材特征是否有深度而非流于表面", "validation_method": "llm_semantic_analysis"}]}, "description": "题材特征精致度和X-Y轴化学反应效果", "dimension_id": "content_quality", "subcategory_id": "genre_fit", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "题材契合度"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "剧情节奏合理性", "validation_rules": [{"rule_id": "pacing_rationality_advanced", "description": "起承转合节奏自然流畅，不拖沓不仓促，有明确高潮点", "validation_method": "llm_semantic_analysis"}]}, "description": "高潮低谷分布合理、情绪曲线有层次感", "dimension_id": "content_quality", "subcategory_id": "pacing_rationality_advanced", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "剧情节奏合理性"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "钩子设计", "validation_rules": [{"rule_id": "hook_design", "description": "钩子有信息差、具体化、与剧情关联、多样化，不能空洞或模板化", "validation_method": "llm_semantic_analysis"}]}, "description": "关键转折处有有效的悬念钩子设计", "dimension_id": "content_quality", "subcategory_id": "hook_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "钩子设计"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "意象系统", "validation_rules": [{"rule_id": "imagery_system", "description": "有贯穿全文的核心意象，且意象在不同阶段发生意义变奏，比喻与主题深度关联", "validation_method": "llm_semantic_analysis"}]}, "description": "核心意象贯穿全文并发生意义变奏", "dimension_id": "content_quality", "subcategory_id": "imagery_system", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "意象系统"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "情感弧线层次", "validation_rules": [{"rule_id": "emotional_gradient", "description": "主角情感有≥4层性质不同的变化，每次转折由具体事件驱动", "validation_method": "llm_semantic_analysis"}]}, "description": "主角情感发展有多层递进变化", "dimension_id": "content_quality", "subcategory_id": "emotional_gradient", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "情感弧线层次"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "语义重复/信息衰减", "validation_rules": [{"rule_id": "semantic_redundancy_detection", "description": "后续章节不能在语义层面大量重复前文已传达的内容，≥3处语义重复即失败", "validation_method": "llm_semantic_analysis"}]}, "description": "不能出现大量语义级别的内容重复（P6级）", "dimension_id": "content_quality", "subcategory_id": "semantic_redundancy", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "语义重复检测"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md + creative_intent.json", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "结构功能性", "applicable_length_tiers": ["ultra_short", "short", "medium"], "validation_rules": [{"rule_id": "structural_design", "description": "结构设计是否服务于主题（首尾呼应、视角切换、非线性时间等），短篇尤为重要", "validation_method": "llm_semantic_analysis"}]}, "description": "叙事结构服务于主题表达（短篇尤重）", "dimension_id": "content_quality", "subcategory_id": "structural_design", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "结构功能性"}, {"check_type": "semantic_check", "params": {"analysis_target": "characters.json + chapters/chapter_*.md", "llm_judge_criteria_file": "judge_criteria/content_quality_advanced.yaml", "llm_judge_criteria_section": "角色命名质量", "validation_rules": [{"rule_id": "character_naming_quality", "description": "命名是否有文化深度和辨识度，而非LLM默认的通用美名（林晚/陈默/苏晚晴等烂大街名字）", "validation_method": "llm_semantic_analysis"}]}, "description": "角色命名有文化深度、辨识度和角色-命运共振", "dimension_id": "content_quality", "subcategory_id": "character_naming_quality", "quality_tier": "advanced", "weight": 1.0, "is_critical": false, "check_id": "角色命名质量"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "validation_rules": [{"rule_id": "total_word_count_short", "validation_method": "word_count_range", "expected_range": [27000, 33000]}]}, "description": "总字数应在27000-33000之间（基于query要求30000，±10%浮动）", "dimension_id": "business_rule_compliance", "subcategory_id": "range_constraint", "weight": 1.0, "is_critical": true, "check_id": "短篇字数"}, {"check_type": "semantic_check", "params": {"analysis_target": "chapters/chapter_*.md", "recipe_source": "creative_intent.json::selected_recipe.reaction_strength", "validation_rules": [{"rule_id": "sweet_tone_delivery", "description": "配方↗甜爽 → 实际内容必须是甜爽向（主角顺风顺水、情感甜美、敌人自爆），不能有虐心情节", "validation_method": "llm_semantic_analysis"}], "llm_judge_criteria_file": "judge_criteria/emotional_delivery.yaml", "llm_judge_criteria_section": "情感交付甜爽"}, "description": "实际内容必须是甜爽向", "dimension_id": "content_quality", "subcategory_id": "emotional_delivery_match", "quality_tier": "basic", "weight": 1.0, "is_critical": true, "check_id": "情感交付甜爽"}, {"check_type": "tool_called_with_params", "params": {"tool_name": "novel_writing_service__read_file", "expected_params": {"path": "data_pools/skills/ROMANCE_WRITING_GUIDE.md"}}, "description": "涉及感情线时必须读取ROMANCE_WRITING_GUIDE.md（感情线写作技巧指南）", "dimension_id": "business_rule_compliance", "subcategory_id": "required_skill_reading", "weight": 1.0, "is_critical": false, "check_id": "读取感情线写作指南"}]}
