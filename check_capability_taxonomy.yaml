# Check能力维度分层体系
# 用于统计和分析模型在不同能力维度上的表现

version: "3.0"
created_at: "2026-01-29"
updated_at: "2026-02-17"
description: "定义check_list检查项的能力维度分层。v3.0新增chapter_output_existence(替代sop_stage_coverage)和character_naming_quality(角色命名质量,DISPLAY_ONLY不计分)"

# === 三层结构 ===
# 第一层：能力大类（对应9大核心能力）
# 第二层：检查类别（更细化的分组）
# 第三层：具体check_item（unified_scenario_design.yaml中的check_list）

# ============================================
# 第一层：能力大类
# ============================================

capability_dimensions:

  # 维度1：格式规范遵循
  - dimension_id: "format_compliance"
    dimension_name: "格式规范遵循"
    core_capability: "Prompt遵循（格式部分）"
    description: "验证输出文件是否严格遵循JSON Schema、命名规范等格式要求"

    subcategories:
      - subcategory_id: "json_syntax"
        subcategory_name: "JSON语法正确性"
        cn_name: "JSON语法正不正确"
        sort_order: [0, 2]
        description: "验证JSON文件的语法正确性（括号、引号、逗号等）"
        check_types: ["json_schema"]

      - subcategory_id: "structural_integrity"
        subcategory_name: "结构完整性"
        cn_name: "JSON文件能不能正常解析、符不符合Schema"
        sort_order: [0, 1]
        description: "JSON结构、必需字段完整性验证"
        check_types: ["json_schema", "entity_attribute_equals"]

      - subcategory_id: "field_naming"
        subcategory_name: "字段名正确性"
        cn_name: "字段名是否符合Schema定义"
        sort_order: [0, 3]
        description: "验证字段名是否符合Schema定义（如scenes vs scenes_detail）"
        check_types: ["entity_attribute_equals"]

      - subcategory_id: "field_type"
        subcategory_name: "字段数据类型正确性"
        cn_name: "字段数据类型正不正确"
        sort_order: [0, 4]
        description: "验证字段值类型是否正确（如对象数组 vs 字符串数组）"
        check_types: ["entity_attribute_equals"]

      - subcategory_id: "naming_convention"
        subcategory_name: "命名规范"
        cn_name: "输出文件的命名规不规范"
        sort_order: [0, 0]
        description: "文件路径、文件命名的规范性"
        check_types: ["entity_attribute_equals", "create_operation_verified"]

  # 维度2：业务规则遵循
  - dimension_id: "business_rule_compliance"
    dimension_name: "业务规则遵循"
    core_capability: "Prompt遵循（业务逻辑部分）"
    description: "验证是否遵守数量约束、范围约束、枚举合法性等业务规则"

    subcategories:
      - subcategory_id: "sop_compliance"
        subcategory_name: "SOP流程遵循"
        cn_name: "该走HITL确认的环节有没有走"
        sort_order: [1, 1]
        description: "验证Agent是否按照规定的工作流程执行，产出过程性文件（如creative_intent.json, characters.json, outline.json, writing_log.md等）。这些文件是Agent执行SOP的证据，而非最终交付物"
        check_types: ["entity_attribute_equals", "tool_called_with_params"]
        validation_examples:
          - "creative_intent.json - 记录用户创作意图和配方选择（阶段2产物）"
          - "characters.json - 记录人物设计（阶段3产物）"
          - "outline.json - 记录故事大纲（阶段3产物）"
          - "writing_log.md - 记录创作日志（阶段4动态更新）"
          - "HITL交互调用 - 在关键阶段与用户交互（配方选择、写作准备确认等）"
        note: "区分过程性产出(SOP遵循)和最终交付物(output_completeness)：前者验证流程执行，后者验证成果完整。SOP流程包括文件产出和交互节点两类验证"

      - subcategory_id: "output_completeness"
        subcategory_name: "交付完整性"
        cn_name: "该交付的文件类型齐不齐"
        sort_order: [1, 2]
        description: "验证最终交付物是否完整（如chapters/目录及其章节文件）。只关注最终成果，不包括过程性文件"
        check_types: ["entity_attribute_equals"]
        note: "交付物是任务的最终成果，如小说创作场景中的chapters/目录"

      - subcategory_id: "workspace_file_compliance"
        subcategory_name: "工作区文件规范"
        cn_name: "workspace中不能有白名单之外的文件"
        sort_order: [1, 7]
        tier_level: "basic"
        description: "workspace中只能存在白名单内的文件，不能创建额外的无关文件。创建额外文件是Agent未遵守SOP输出规范的表现"
        check_types: ["file_whitelist_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        allowed_files:
          - "creative_intent.json（必需）"
          - "characters.json（必需）"
          - "outline.json（必需）"
          - "writing_log.md（必需）"
          - "chapters/目录及其下的chapter_NN.md文件（必需）"
          - ".hitl_context.json（系统文件）"
        examples:
          - "✅ 合格：workspace只有白名单内的文件"
          - "❌ 不合格：workspace中出现afterword.md、bonus/目录、character_qa.md等额外文件"
        note: "从原late_stage_digression拆分出来的规则检查部分。原检查项混合了白名单文件检查（规则）和章节内容跑偏检查（语义），拆分后归因更清晰"

      - subcategory_id: "quantity_constraint"
        subcategory_name: "数量约束"
        cn_name: "配方参数数量对不对（如Y轴标签要求2-3个）"
        sort_order: [1, 4]
        description: "集数、角色数、钩子数、场景数等数量要求"
        check_types: ["create_operation_verified", "entity_attribute_equals"]

      - subcategory_id: "range_constraint"
        subcategory_name: "范围约束"
        cn_name: "总字数在不在要求的范围内"
        sort_order: [1, 5]
        description: "字数范围、数组长度范围等区间要求。针对小说创作：验证内容是否遵循用户指定的字数要求（如用户要求3000字开篇则需符合该范围）"
        check_types: ["entity_attribute_equals", "semantic_check"]
        note: "篇幅标准来自用户query中的明确要求，无硬编码字数限制。字数范围检查通常使用semantic_check类型"

      - subcategory_id: "enum_validity"
        subcategory_name: "枚举合法性"
        cn_name: "配方参数值是否在合法枚举范围内"
        sort_order: [1, 3]
        description: "role_type、genre_type等枚举字段值合法性"
        check_types: ["entity_attribute_equals"]

      - subcategory_id: "emotional_tendency_consistency"
        subcategory_name: "情感倾向一致性"
        cn_name: "配方的情感倾向和用户表达的是否一致"
        sort_order: [1, 8]
        description: "验证配方设计中reaction_strength与用户明确表达的desired_emotion逻辑一致。如果用户明确要求情感倾向，Agent的配方记录必须匹配"
        check_types: ["entity_attribute_equals"]
        validation_examples:
          - "用户说'希望是爽文' → reaction_strength应该是↗"
          - "用户说'虐心向' → reaction_strength应该是↘"
          - "用户说'烧脑' → reaction_strength应该是✷"
          - "用户说'不要太虐' → forbidden_elements应该包含'过度虐心'"
        note: "仅验证配方记录的逻辑一致性，不验证实际内容（实际内容由content_quality.basic层的emotional_delivery_match验证）"

      - subcategory_id: "required_skill_reading"
        subcategory_name: "必需Skill文档读取"
        cn_name: "开工前有没有先读skill文档"
        sort_order: [1, 0]
        description: "验证Agent是否正确读取了业务规则要求的必需skill文档（如配方知识库、命名规范、创作指南等），确保具备完成任务所需的领域知识"
        check_types: ["tool_called_with_params"]
        validation_examples:
          - "SKILL.md（配方知识库）：包含X轴36种模式、Y轴12种标签、化学反应规则，是配方设计的核心依据"
          - "CHARACTER_NAMING_GUIDE.md（角色命名规范）：提供不同风格（现代/古风/奇幻/科幻）的命名规范和注意事项"
          - "SHORT_STORY_GUIDE.md（短篇创作指南）：针对短篇创作的三幕结构、物件设计、时间压缩等技巧"
        note: "检查Agent是否调用read_file工具读取了指定路径的skill文档，不读取这些文档直接创作的行为违反业务规则"

      - subcategory_id: "output_self_validation"
        subcategory_name: "输出自验证能力"
        cn_name: "写完JSON后有没有调用bash验证合法性"
        sort_order: [1, 6]
        description: "验证Agent是否在产出结构化文件后主动调用工具验证其合法性（如写完JSON后用bash/python验证语法），体现自主质量控制能力"
        check_types: ["tool_called_with_params"]
        note: "这是反思与动态调整能力的体现——Agent应当对自己的产出进行验证而非盲目提交"

  # 维度3：长期记忆管理
  - dimension_id: "memory_management"
    dimension_name: "长期记忆管理"
    core_capability: "反思与动态调整 + 复杂上下文理解"
    description: "验证Agent是否能在长文本创作中主动记录和读取关键信息（writing_log.md），保持前后文一致性和长程规划能力"

    subcategories:
      - subcategory_id: "log_file_creation"
        subcategory_name: "创作日志文件创建"
        cn_name: "有没有创建writing_log记录创作进度"
        sort_order: [2, 0]
        description: "验证Agent在超过8000字的创作任务中是否主动创建writing_log.md文件，记录创作进度、已写内容、待办事项等关键信息"
        check_types: ["entity_attribute_equals"]
        validation_examples:
          - "短篇（15000-40000字）：应创建writing_log.md"
          - "中篇（80000-250000字）：必须创建writing_log.md"
          - "长篇（400000+字）：必须创建writing_log.md"
          - "超短篇（<8000字）：不要求writing_log.md"
        note: "writing_log.md是Agent长期记忆的外化表现，创建该文件表明Agent具备主动记录关键信息的意识"

      - subcategory_id: "log_file_usage"
        subcategory_name: "创作日志读取使用"
        cn_name: "续写时有没有先读writing_log了解前文"
        sort_order: [2, 1]
        description: "验证Agent是否在创作新章节前读取writing_log.md，了解前文内容和待办事项，避免重复或矛盾"
        check_types: ["tool_called_with_params"]
        note: "仅创建不读取的writing_log.md是无效的，真正的长期记忆管理需要'写-读-写'闭环"

  # 维度4：流程交互完整性
  - dimension_id: "interaction_completeness"
    dimension_name: "流程交互完整性"
    core_capability: "多轮对话管理与用户引导"
    description: "验证是否在关键节点与用户交互、确认流程是否完整"

    subcategories:
      - subcategory_id: "confirmation_nodes"
        subcategory_name: "确认节点调用"
        cn_name: "关键阶段完成后有没有HITL确认"
        sort_order: [2, 5]
        description: "关键阶段完成后的HITL确认"
        check_types: ["tool_called_with_params"]

  # 维度5：内容创作质量
  - dimension_id: "content_quality"
    dimension_name: "内容创作质量"
    core_capability: "结合领域知识的自主规划"
    description: "验证创作内容是否能交付一个'好的'短剧作品，采用两层评估体系：低质问题（60分线）→ 优质识别（60-80分）"

    # ============================================
    # 质量层级定义（两层体系）
    # ============================================
    quality_tiers:
      description: "内容质量维度采用两层评估体系，逐层递进筛选"

      tiers:
        - tier_id: "basic"
          tier_name: "基础质量检查"
          score_range: "0-60分（及格线）"
          description: "主题一致性、角色一致性、人物设定一致性、逻辑硬伤、情感交付匹配度等内容质量底线要求"
          llm_judge_output: "matched: true/false (true表示达标)"
          checker_mapping: "matched=false→不合格（0-60分）"

        - tier_id: "advanced"
          tier_name: "优秀质量检查"
          score_range: "60-80分（优秀标准）"
          description: "吸引力、情感力、情感递进、题材契合度等优质特征"
          llm_judge_output: "matched: true/false (true表示优秀)"
          checker_mapping: "通过率≥70%→优秀，<70%→合格"

      quality_calculation:
        - "不合格: basic层有任何失败 → 0-60分"
        - "合格: basic全过 + advanced通过率<70% → 60-70分"
        - "优秀: basic全过 + advanced通过率≥70% → 70分以上"

      usage_note: "quality_tier字段仅用于content_quality维度的check_item。其他维度保持标准的二元pass/fail判断。"

    subcategories:
      # === 基础层（4个）===
      - subcategory_id: "theme_consistency"
        subcategory_name: "主题一致性"
        cn_name: "故事核心主题从头到尾有没有跑偏"
        sort_order: [3, 20]
        tier_level: "basic"
        description: "故事核心主题贯穿始终，不能中途漂移到其他主题（如从复仇故事漂移成商战故事，再漂移成修仙故事）"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        examples:
          - "✅ 主题一致：开篇复仇→中段追查→高潮对决→结局复仇完成（始终围绕复仇主题）"
          - "❌ 主题漂移：开篇复仇→中段突然变商战→后段又变修仙（主题完全散了）"
          - "✅ 允许的子线：复仇故事中有商业手段、权谋布局（这些是实现复仇的方式，不算漂移）"

      - subcategory_id: "main_character_consistency"
        subcategory_name: "主要角色一致性"
        cn_name: "前中后主要角色保持一致，主角不能消失或被替换"
        sort_order: [3, 30]
        tier_level: "basic"
        description: "前中后主要角色保持一致，不能前面设计的主角后面丢了，不能突然冒出新的主角（工具人/配角可以阶段性出现）"
        check_types: ["semantic_check", "cross_file_consistency"]
        applicable_scenarios: ["original_creation", "adaptation"]

      - subcategory_id: "character_design_adherence"
        subcategory_name: "人物设计遵循度"
        cn_name: "正文中角色表现符不符合characters.json的人设"
        sort_order: [3, 12]
        tier_level: "basic"
        description: "正式章节中角色的实际表现必须符合characters.json中设计的人物特点（traits、motivation、background等）。这是检查plan阶段设计与execute阶段实际表现的一致性"
        check_types: ["semantic_check", "cross_file_consistency"]
        applicable_scenarios: ["original_creation", "adaptation"]
        examples:
          - "✅ 符合设计：characters.json定义'沉默寡言、外冷内热' → chapters中确实话少但关键时刻有担当"
          - "✅ 符合设计：characters.json定义'倔强、细腻、隐忍' → chapters中面对困境坚持、情感细腻、不轻易妥协"
          - "❌ 不符合设计：characters.json定义'沉默寡言' → chapters中话痨、热情外向"
          - "❌ 不符合设计：characters.json定义'聪明绝顶' → chapters中表现愚钝、判断力差"
          - "❌ 不符合设计：characters.json定义动机是'复仇' → chapters中完全不提复仇，只关心赚钱"
        note: "与character_trait_consistency区分：本项检查plan vs execute（设计文档 vs 实际表现），character_trait_consistency检查execute内部（chapter_01 vs chapter_02）"

      - subcategory_id: "character_presence_in_outline"
        subcategory_name: "角色大纲规划完整性"
        cn_name: "设计的角色（主角+配角）在大纲中有没有规划"
        sort_order: [3, 10]
        tier_level: "basic"
        description: "characters.json中设计的所有角色（main_characters + supporting_characters）必须在outline.json中规划出场。主角缺失=fail，配角缺失=pass但附带警告"
        check_types: ["entity_attribute_equals"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_method: "规则判断：检查characters.json中每个角色的name是否在outline.json的文本中出现（主角+配角分别统计）"
        examples:
          - "✅ 合格：characters.json定义了主角['林羽', '幽灵'] + 配角['苏小满']，outline.json中都提到了"
          - "❌ 不合格（主角缺失）：characters.json定义了主角['林羽', '幽灵']，但outline.json中只提到了'林羽'"
          - "⚠️ pass但警告（仅配角缺失）：主角全部出现，但配角'苏小满'未在大纲中规划"
        note: "这是Plan阶段的完整性检查。主角缺失直接fail，配角缺失不影响pass/fail但会记录在details中"

      - subcategory_id: "character_presence_in_chapters"
        subcategory_name: "角色正文出场完整性"
        cn_name: "设计的角色（主角+配角）在正文章节中出没出现"
        sort_order: [3, 11]
        tier_level: "basic"
        description: "characters.json中设计的所有角色（main_characters + supporting_characters）必须在chapters/正文中实际出现。主角缺失=fail，配角缺失=pass但附带警告"
        check_types: ["entity_attribute_equals"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_method: "规则判断：检查characters.json中每个角色的name是否在chapters/*.md的文本中出现（主角+配角分别统计）"
        examples:
          - "✅ 合格：characters.json定义了主角['林羽', '幽灵'] + 配角['老陈']，chapters中都出现了"
          - "❌ 不合格（主角缺失）：characters.json定义了主角['林羽', '幽灵']，但chapters中只出现了'林羽'"
          - "⚠️ pass但警告（仅配角缺失）：主角全部出现，但配角'老陈'在正文中完全未出场"
        note: "这是Execute阶段的完整性检查。与character_design_adherence区分：本项检查是否出现（存在性），后者检查表现质量（准确性）"

      - subcategory_id: "character_trait_consistency"
        subcategory_name: "人物设定一致性"
        cn_name: "同一角色的性格前后章节有没有变"
        sort_order: [3, 13]
        tier_level: "basic"
        description: "章节之间人物特征（智商、性格、能力等）要保持一致，不能出现角色崩坏。这是检查execute阶段内部的一致性（前后章节之间）"
        check_types: ["semantic_check", "cross_file_consistency"]
        applicable_scenarios: ["original_creation", "adaptation"]
        examples:
          - "✅ 真崩坏：chapter_01聪明绝顶 → chapter_02突然降智（无合理原因）"
          - "✅ 真崩坏：chapter_01善良温柔 → chapter_02残忍冷血（无铺垫无转折）"
          - "✅ 真崩坏：chapter_01武功高强 → chapter_02被小喽啰打败（能力设定崩坏）"
          - "❌ 不算崩坏：谨慎的人被逼急了变莽撞（有情境压力，合理）"
          - "❌ 不算崩坏：单纯的人经历背叛后变谨慎（有铺垫的性格成长）"
        note: "与character_design_adherence区分：本项检查execute内部一致性（chapter_01 vs chapter_02），character_design_adherence检查plan vs execute（设计文档 vs 实际表现）"

      - subcategory_id: "structural_logic_defect"
        subcategory_name: "结构性逻辑硬伤"
        cn_name: "有没有不可修复的结构性逻辑矛盾（需大幅重写的严重问题）"
        sort_order: [3, 24]
        tier_level: "basic"
        description: "不可修复的结构性逻辑矛盾——矛盾深入多章情节因果链，修复需大幅重写。与'可修复逻辑瑕疵'共享一次LLM judge调用，按fixability字段拆分。Judge输出包含结构化flaws数组，每处硬伤标注type/severity/fixability"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        flaw_types:
          - id: "factual_consistency"
            name: "客观事实/数量/状态矛盾"
            description: "时间线数字冲突、物品数量变化、生死判决翻转等可量化的客观事实"
          - id: "worldbuilding_coherence"
            name: "世界观/规则体系不自洽"
            description: "系统设定互斥、能力边界突变、魔法/科技规则冲突等"
          - id: "spatiotemporal_continuity"
            name: "时空转换断链"
            description: "地点无交代跳转、强制事件无故消失、场景连续性断裂等"
          - id: "narrative_perspective_error"
            name: "叙事视角/人称代词错乱"
            description: "第一人称与第三人称混用、主语指代搞反、视角限制被打破"
        severity_levels:
          - id: "critical"
            name: "核心事实翻转"
            description: "无法自圆其说（死人复活、判决完全相反）"
          - id: "major"
            name: "明确矛盾"
            description: "缺少任何解释（数值冲突、规则覆盖）"
        fixability_filter: "structural"
        examples:
          - "✅ structural：角色第3章死亡，但第7-12章以该角色为核心推动情节（修复需重写6+章）"
          - "✅ structural：角色身份A→B→C三种解释分别引出不同结局线（修复需重构全文）"
          - "❌ 不属于本项：角色25岁→30岁（改一个数字即可修复 → fixable_logic_inconsistency）"

      - subcategory_id: "fixable_logic_inconsistency"
        subcategory_name: "可修复逻辑瑕疵"
        cn_name: "有没有局部可修的逻辑不一致（改几句话就能修好的小问题）"
        sort_order: [3, 25]
        tier_level: "advanced"
        description: "局部可修的逻辑不一致——只需修改少量文字即可消除矛盾，不影响情节主线和整体可用性。与'结构性逻辑硬伤'共享一次LLM judge调用，按fixability字段拆分"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        fixability_filter: "fixable"
        examples:
          - "✅ fixable：角色年龄25岁→30岁（改一个数字即可）"
          - "✅ fixable：枕巾数量40对→50对（统一数字即可）"
          - "✅ fixable：人称代词在某段落内混用了一次（改几个字即可）"
          - "❌ 不属于本项：角色死后复活且后续6章依赖其存活 → structural_logic_defect"

      - subcategory_id: "emotional_delivery_match"
        subcategory_name: "情感交付匹配度"
        cn_name: "写出来的内容读起来是不是要求的那个味（甜/虐/烧脑）"
        sort_order: [3, 22]
        tier_level: "basic"
        description: "实际章节内容的情感倾向必须与配方的reaction_strength匹配，不能出现反向交付（要爽却虐、要虐却甜）。如果用户明确禁止某些元素，实际内容绝对不能触碰"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_focus:
          - "配方reaction_strength=↗ → 实际内容应该是爽文（主角顺风顺水、反转爽快、情感甜美）"
          - "配方reaction_strength=↘ → 实际内容应该是虐文（主角受难、情感压抑、冲突尖锐）"
          - "配方reaction_strength=✷ → 实际内容应该烧脑（悖论、反转、认知颠覆）"
          - "forbidden_elements中的元素绝对不能出现在实际内容中"
        examples:
          - "✅ 正确匹配：配方↗爽文 → 实际主角化险为夷、敌人自爆、甜蜜恋爱"
          - "✅ 正确匹配：配方↘虐文 → 实际主角被迫害、爱而不得、悲剧收尾"
          - "❌ 反向交付：配方↗爽文 → 实际主角各种受挫、感情虐心、压抑氛围"
          - "❌ 触碰避雷：forbidden_elements=['悲剧结局'] → 实际写了BE"
        note: "与genre_fit区分：emotional_delivery_match检查情感倾向正确性（爽/虐/烧脑基本对不对），genre_fit检查题材特征的精致度和完成度（对得多好多精彩）"

      - subcategory_id: "language_purity"
        subcategory_name: "语言纯净性"
        cn_name: "正文有没有不合理的中英混用"
        sort_order: [3, 1]
        tier_level: "basic"
        description: "避免不合理的多语言混用（如中文故事中突然夹杂大量英文、日文等）。如果是情节必需（如角色身份、特殊场景、专有名词等），则豁免"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_focus:
          - "主要叙事语言保持统一，避免无故夹杂外语"
          - "如果是情节必需（角色是外国人、特殊术语、品牌名等），则合理"
        examples:
          - "✅ 合理混用：'John是一位美国商人' → 人名本身就是英文，合理"
          - "✅ 合理混用：'他们在Starbucks见面' → 专有品牌名，合理"
          - "✅ 合理混用：'她说了一句\"Good morning\"' → 角色说外语，情节需要"
          - "❌ 不合理混用：'他very生气地说' → 中英混杂无意义"
          - "❌ 不合理混用：'这个idea真的不错' → 应该用'想法'而非'idea'"
          - "❌ 不合理混用：'他feeling到了危险' → 应该用'感觉到'而非'feeling'"
        note: "区分合理的外语使用（人名、地名、品牌、术语、角色对话）与不合理的语言炫技（无意义的中英混杂）"

      - subcategory_id: "plot_progression"
        subcategory_name: "情节推进"
        cn_name: "章节之间情节有没有在往前推进"
        sort_order: [3, 21]
        tier_level: "basic"
        description: "章节必须包含足够的具体故事事件推进，避免纯对话或纯内心独白。故事需要有实质性的情节发展（行动、发现、转折、冲突等），而非仅停留在静态的情感倾诉或对话"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_focus:
          - "故事事件密度：每章应有明确的事件节点（行动、发现、转折、冲突）"
          - "内容类型占比：故事事件占比应≥40%，避免过度的纯对话或纯内心独白（>70%）"
          - "情节推进节奏：有明确的时间/空间变化，角色有具体行动而非仅对话"
          - "事件因果性：事件之间有逻辑关联，推动故事发展"
        examples:
          - "✅ 良好推进：收到神秘信件 → 调查来源 → 发现线索 → 遇到关键人物 → 产生新转折（事件密集）"
          - "✅ 良好推进：主角做出决策 → 执行行动 → 遇到障碍 → 寻求帮助 → 获得突破（有具体行动）"
          - "⚠️ 中等质量：分析情况（30%）→ 回忆往事（40%）→ 发现异常（30%）（事件较少，回忆过多）"
          - "❌ 缺乏推进：两人站着聊天，讨论情感和想法，无任何实质事件发生（纯对话，无推进）"
          - "❌ 缺乏推进：大段内心独白，回忆过去，情感倾诉，场景静止（纯独白，无行动）"
        scoring_rubric: |
          1分（不合格）- 章节主要由静态对话或内心独白构成（>70%），无具体故事事件，场景静止，角色无实质行动
          3分（及格）- 有一定故事事件（2-3个），事件与描写基本平衡（事件占比40-60%），有场景变化或时间推进
          5分（优秀）- 故事事件密集（4-5个以上事件节点），事件推进为主（>60%），有明确场景变化和因果关系，包含冲突/转折/悬念
        note: "与pacing_rationality_advanced区分：plot_progression是basic层的基本推进要求（有没有事件），pacing_rationality_advanced是advanced层的节奏优化（事件安排得好不好）"

      - subcategory_id: "full_narrative_content"
        subcategory_name: "完整叙事文本"
        cn_name: "章节内容是完整正文还是大纲摘要"
        sort_order: [3, 0]
        tier_level: "basic"
        description: "章节内容必须是完整的小说正文（有场景、对话、动作细节），而非事件罗列的简略大纲"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_focus:
          - "叙事形式：是否有完整的场景描写、人物对话、动作细节"
          - "文本密度：是否有具体的叙事文本，而非仅事件概述"
          - "大纲特征识别：是否存在'然后...接着...最后...'的列举式表述"
        examples:
          - "✅ 完整正文：'凌晨三点，林羽双手悬在键盘上方。屏幕上的代码像水银一样流动。\"删除权限？\"他冷笑一声...'"
          - "❌ 大纲罗列：'第一章：林羽被公司陷害，逃入地下黑客网络，遇到神秘黑客幽灵'"
          - "❌ 事件列举：'林羽接到消息→调查线索→发现真相→决定反击'"
        scoring_rubric: |
          1分（不合格）- 章节主要由事件罗列构成，缺乏场景描写和人物对话，类似大纲或故事梗概
          3分（及格）- 有基本的场景描写和对话，但叙事不够充分，部分内容仍显简略
          5分（优秀）- 完整的小说正文，有丰富的场景描写、人物对话、动作细节和情感刻画
        note: "与plot_progression区分：本项检查叙事形式（是不是正文），plot_progression检查情节密度（有没有事件）"

      - subcategory_id: "repeated_endings"
        subcategory_name: "反复结局"
        cn_name: "不能出现多次结局标记（全文完/全书完/后记）"
        sort_order: [3, 31]
        tier_level: "basic"
        description: "故事只能有一个结局，不能出现多次'全文完/全书完/后记'标记。反复结局是'写不动了硬撑'的典型症状"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_focus:
          - "结局标记数量：扫描所有章节，统计'全文完/全书完/后记/尾声/完结'等标记出现次数"
          - "结局标记位置：结局标记应该只出现在最后一章"
          - "反复收尾特征：是否存在草草结局后又硬续新内容的情况"
        examples:
          - "✅ 合格：chapter_01~28无结局标记，chapter_29有'【全文完】'和'后记'"
          - "❌ 不合格：chapter_12有'【全文完】'和'后记'，chapter_20又有'【全书完】'，chapter_29还有'【全书完】'"
        note: "这是识别模型长篇创作后劲不足的重要指标"

      - subcategory_id: "narrative_tone_match"
        subcategory_name: "叙事调性匹配"
        cn_name: "文笔画风跟题材搭不搭（烧脑文不能写成言情调）"
        sort_order: [3, 23]
        tier_level: "basic"
        description: "章节的文笔风格、叙事语气、修辞手法、节奏感必须与题材类型匹配。烧脑悬疑应冷硬紧凑，不能写成温情细腻的言情风；热血冒险应紧张激燃，不能写成散文诗体。这是检查'画风搭不搭'的底线"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_focus:
          - "文笔风格：句式（长句/短句）、修辞（感性/理性）、信息密度"
          - "叙事语气：冷硬/温情/轻快/沉重/激燃"
          - "对话风格：信息导向/情感导向/幽默导向"
          - "节奏感：紧凑/舒缓/明快/散漫"
        examples:
          - "✅ 调性匹配：烧脑悬疑用冷硬紧凑的笔触，短句为主、推理过程干脆利落"
          - "✅ 调性匹配：甜宠言情用轻快温暖的笔触，细腻的情感描写、甜蜜的互动"
          - "❌ 调性错位：规则怪谈写成'两人的手不知什么时候握在了一起''泪水夺眶而出'——言情调"
          - "❌ 调性错位：热血冒险写成散文诗体，战斗场景缺乏力度和速度感"
        note: "与emotional_delivery_match区分：后者检查情感倾向方向（爽/虐/烧脑对不对），本项检查文笔画风（写出来像不像这个题材）。与genre_fit区分：后者是advanced层的精致度检查（做得好不好），本项是basic层的底线检查（像不像）"

      - subcategory_id: "late_stage_digression"
        subcategory_name: "后期章节跑偏"
        cn_name: "后期章节不能跑偏写非正文内容（作者感想/读者互动/番外预告等）"
        sort_order: [3, 32]
        tier_level: "basic"
        description: "chapters中所有章节都应是故事正文，不能跑去写作者感想、读者互动、番外预告、角色问答等非正文内容；后期章节长度不能异常萎缩"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_focus:
          - "章节内容检查：后期章节是否偏离正文，写作者感想/读者互动/番外预告/角色问答等"
          - "章节长度检查：后期章节长度是否异常萎缩（不足前期平均的1/10）"
        examples:
          - "✅ 合格：所有章节都是故事正文，长度稳定"
          - "❌ 不合格（章节跑偏）：后期章节变成作者感想、番外预告、角色问答等"
          - "❌ 不合格（章节萎缩）：前期每章5000-20000字，后期每章几十到几百字"
        note: "从原late_stage_digression拆分出来的语义检查部分。白名单文件检查已拆分到workspace_file_compliance（business_rule_compliance维度）。与full_narrative_content区分：本项检查正文vs非正文乱内容，full_narrative_content检查大纲式vs正文"

      # === P0 Gate: 章节产出存在性 ===
      - subcategory_id: "chapter_output_existence"
        subcategory_name: "章节产出存在性"
        cn_name: "workspace中有没有章节文件（无章节=执行崩坏）"
        sort_order: [3, -1]
        tier_level: "basic"
        is_gate: true
        description: "Gate级检查。workspace中必须存在至少一个chapter_*.md文件。无章节文件说明Agent执行在写作阶段前崩坏（API崩溃/Simulator误判/模型能力不足），产出物不足以评估。替代旧的sop_stage_coverage（不再检查characters.json和outline.json等中间产物）"
        check_types: ["sop_stage_coverage"]
        applicable_scenarios: ["original_creation", "adaptation"]
        replaces: "sop_stage_coverage"
        note: "从sop_stage_coverage简化而来。旧检查要求characters.json+outline.json+chapters全存在，过于严格——doubao写了10章但缺outline.json即被gate，属于假阳性。简化为仅检查最终产出（章节文件）是否存在"

      # === P1-P5 程序化内容质量检查（零LLM成本，检测严重结构性缺陷）===
      - subcategory_id: "chapter_cloning"
        subcategory_name: "章节克隆检测"
        cn_name: "有没有连续多章内容完全一样（复制粘贴）"
        sort_order: [3, 2]
        tier_level: "basic"
        is_gate: true
        description: "检测连续章节内容完全重复（克隆）的严重质量缺陷。连续>=2章去掉标题行后内容完全相同，或连续>=3章前500字符完全相同，均判定为克隆。纯程序化检测，零LLM成本"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_method: "chapter_cloning_detection"
        examples:
          - "❌ 完全克隆：chapter_13到chapter_48（36章）去掉标题行后内容完全相同，每章2207字节"
          - "❌ 近似克隆：chapter_25到chapter_45（21章）前500字符完全相同"
        note: "Gate项（一票否决候选）。这不是'质量差'，是'根本没有有效交付'——模型写入循环后输出了几十章相同内容"

      - subcategory_id: "alternating_repetition"
        subcategory_name: "交替重复检测"
        cn_name: "有没有A-B-A-B这样两章内容交替循环"
        sort_order: [3, 3]
        tier_level: "basic"
        is_gate: true
        description: "检测A-B-A-B或A-B-C-A-B-C等交替循环模式。连续>=4章出现交替重复（相邻偶数/奇数章内容相同）即判定失败。纯程序化检测，零LLM成本"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_method: "alternating_repetition_detection"
        examples:
          - "❌ 交替重复：chapter_23到chapter_44呈现A(1403bytes)-B(1508bytes)交替模式，共11轮"
        note: "Gate项（一票否决候选）。比完全克隆更隐蔽的退化模式——模型在两个状态之间振荡"

      - subcategory_id: "chapter_completion"
        subcategory_name: "章节完成度"
        cn_name: "该写的章节写了多少（有没有半途而废）"
        sort_order: [3, 4]
        tier_level: "basic"
        is_gate: true
        description: "实际写作章节数/大纲规划章节数的比例。比例<0.5即判定为早期终止。0章交付直接判定失败。纯程序化检测，零LLM成本"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_method: "chapter_completion_ratio"
        examples:
          - "❌ 早期终止：大纲规划10章，实际仅完成1章（完成率10%）"
          - "❌ 零交付：chapters目录中没有任何章节文件"
          - "✅ 合格：大纲规划60章，实际完成60章（完成率100%）"
        note: "Gate项（一票否决候选）。检测Agent在执行阶段因各种原因（429/crash/能力不足）提前终止的情况"

      - subcategory_id: "chapter_length_stability"
        subcategory_name: "章节长度稳定性"
        cn_name: "后期章节有没有越写越短、严重萎缩"
        sort_order: [3, 5]
        tier_level: "basic"
        description: "后1/4章节平均长度不能低于前1/3章节平均长度的30%。低于该阈值表明模型在长篇创作中出现严重的输出退化。纯程序化检测，零LLM成本"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_method: "chapter_length_stability"
        examples:
          - "❌ 严重崩塌：前20章均值2821字，后15章均值376字（衰减至13.3%）"
          - "❌ 严重崩塌：前14章均值4800字，后11章均值498字（衰减至10.4%）"
          - "✅ 稳定：前1/3均值3000字，后1/4均值2500字（比率83%）"
        note: "非Gate项，但是重要的质量指标。后期章节萎缩往往伴随内容质量退化（摘要体、模板化）"

      - subcategory_id: "paragraph_repetition"
        subcategory_name: "段落重复检测"
        cn_name: "有没有大量段落在不同章节间重复出现"
        sort_order: [3, 6]
        tier_level: "basic"
        description: "检测跨章节段落重复（相同段落出现在多个章节）和单章内连续段落重复。跨章重复>=5组或单章连续重复段落>=3即判定失败。纯程序化检测，零LLM成本"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_method: "paragraph_repetition_detection"
        examples:
          - "❌ 跨章重复：5个段落分别出现在36章中（因章节克隆导致）"
          - "❌ 单章重复：chapter_05中有37处连续段落重复"
          - "✅ 合格：跨章重复1组（阈值5），单章重复0处（阈值3）"
        note: "非Gate项。段落级重复是比章节克隆更细粒度的质量问题，可以独立于P1/P2出现"

      - subcategory_id: "outline_execution_fidelity"
        subcategory_name: "大纲执行忠实度"
        cn_name: "实际写的内容跟自己设计的大纲一不一致"
        sort_order: [3, 7]
        tier_level: "basic"
        description: "实际写出的章节是否忠实执行了自己设计的outline.json。检查大纲中的关键转折点、核心事件是否在对应章节中体现，不能出现大纲设计A结局实际写成B结局、大纲规划的关键场景完全缺失等情况"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        validation_method: "llm_semantic_analysis"
        examples:
          - "❌ 严重偏离：outline设计'彻底悲剧结局'，实际写成'悬念续集开放结局'"
          - "❌ 严重偏离：outline设计9章，实际只写7章，缺少高潮对决和结局"
          - "❌ 关键缺失：outline设计'主角发现真凶是父亲'的核心转折，实际章节中完全没有"
          - "✅ 允许偏离：大纲说'在咖啡馆相遇'，实际写成'在书店相遇'（细节调整，不影响主线）"
          - "✅ 允许偏离：大纲规划3个场景，实际扩展为5个场景（丰富化，不违背大纲意图）"
        note: "规划-执行一致性是基础底线：Agent花了资源设计大纲却不按大纲执行，说明执行阶段的规划遵循能力有缺陷。与character_design_adherence类似，都是plan vs execute的一致性检查"

      # === 优秀层 ===
      # 保留有清晰判定标准的维度，挂起难以标准化的情感类维度

      # 保留（3个）
      - subcategory_id: "genre_fit"
        subcategory_name: "题材契合度"
        cn_name: "题材特征体现得精不精致"
        sort_order: [3, 43]
        tier_level: "advanced"
        description: "完美体现配方精髓（X-Y轴化学反应准确）：不仅情感倾向正确（basic层已验证），还要体现出题材的独特魅力和深度。甜宠不仅甜还要甜得有层次，复仇不仅爽还要爽得有策略，悬疑不仅烧脑还要烧得有逻辑美感"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        priority: "high"
        note: "本场景核心评测点：验证X轴模式+Y轴标签的组合是否达到预期的化学反应效果。与emotional_delivery_match区分：后者检查情感倾向正确性（底线），genre_fit检查题材特征的精致度和完成度（优秀标准）"

      - subcategory_id: "pacing_rationality_advanced"
        subcategory_name: "剧情节奏合理性"
        cn_name: "剧情节奏合不合理"
        sort_order: [3, 50]
        tier_level: "advanced"
        description: "高潮低谷分布合理、节奏有层次感、情绪曲线自然流畅、不拖沓不仓促"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        priority: "medium"

      - subcategory_id: "hook_design"
        subcategory_name: "钩子设计"
        cn_name: "悬念和钩子设计得好不好"
        sort_order: [3, 51]
        tier_level: "advanced"
        description: "关键转折处有悬念设计、质量高（放出一点保留一些）、吊胃口但不空洞、让读者想继续阅读"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        priority: "medium"

      # 替换（dialogue_quality → dialogue_character_distinction）
      - subcategory_id: "dialogue_character_distinction"
        subcategory_name: "角色语言辨识度"
        cn_name: "遮住角色名能不能分辨谁在说话"
        sort_order: [3, 44]
        tier_level: "advanced"
        description: "不同角色的对话必须有语言风格差异：用词习惯、句式长短、语气特征、口头禅等。理想状态是遮住角色名仅凭对话内容就能识别说话者。最差的情况是所有角色共享同一套话术模板"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        priority: "high"
        validation_method: "llm_semantic_analysis"
        examples:
          - "✅ 有辨识度：老刑警说话简短粗粝（'少废话，现场封了没'），法医用专业术语+冷幽默（'死亡时间嘛，比你早起那么一点点'），线人口语化带方言（'哥你不知道啊，昨晚那阵势...'）"
          - "❌ 无辨识度：所有角色共享'神秘暗示体'——'也许真相并不像你看到的那样''有些事，知道得太多并不是好事'"
          - "❌ 无辨识度：外公和年轻同事对同一件事回应一字不差（'看走眼不可怕，可怕的是不敢承认'）"
        note: "替代原dialogue_quality。原项关注'台词写得好不好'（太模糊），新项关注'角色说话有没有区分'（有具体操作标准）。审计发现qwen3/glm多个样本存在严重的对话同质化"

      # 新增（2个）
      - subcategory_id: "narrative_density"
        subcategory_name: "叙事密度"
        cn_name: "写得细不细（场景描写、感官细节、心理活动的密度）"
        sort_order: [3, 45]
        tier_level: "advanced"
        description: "章节是否包含足够的场景描写、感官细节、心理活动，而非纯对话或事件流水账。区分'细腻描写'和'粗糙罗列'。与full_narrative_content(basic)的区别：后者检查'是不是正文'，本项检查'写得细不细'"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        priority: "high"
        validation_method: "llm_semantic_analysis"
        examples:
          - "✅ 高密度：'凌晨三点的实验室，荧光灯发出轻微的嗡鸣。陆衡盯着显微镜下的切片，左眼酸涩到快要痉挛，但他不敢眨眼——上一次眨眼时，他漏掉了关键的细胞异变。咖啡已经凉了，杯壁上凝结着一层棕色的膜。'"
          - "❌ 低密度/流水账：'陆衡在实验室工作到凌晨三点。他看了显微镜。咖啡凉了。他继续工作。'"
          - "❌ 纯对话骨架：整章仅由对话构成，无环境描写、无心理活动、无动作细节"
          - "❌ 议论文体：章节退化为观点阐述和工作报告，丧失叙事性"
        note: "审计发现：kimi后期章节退化为'人物摘要列表'，glm退化为纯对话骨架，qwen3退化为议论文。这些问题full_narrative_content可能判通过（因为确实是'正文'不是'大纲'），但叙事质量极低"

      - subcategory_id: "puzzle_logic_validity"
        subcategory_name: "智斗逻辑合理性"
        cn_name: "谜题/智斗的推理逻辑成不成立"
        sort_order: [3, 60]
        tier_level: "advanced"
        description: "烧脑/悬疑/智斗类题材中，谜题的答案推理链是否逻辑自洽。密码谜题是否有合理的解法路径，策略博弈是否有合理的攻防逻辑，不能出现'直接猜对'或'太复杂了直接砸门然后门自己开了'的情况"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        applicable_genres: ["brainy_action", "suspense", "mystery"]
        priority: "medium"
        validation_method: "llm_semantic_analysis"
        examples:
          - "❌ 逻辑崩坏：密码谜题直接猜'13'就对了，无推理过程"
          - "❌ 逻辑崩坏：'13+7=20, 20-13=7, 会不会是7？'——推理链不成立但答案正确"
          - "❌ 逻辑崩坏：'太复杂了直接砸吧'→门自己开了"
          - "✅ 逻辑自洽：根据墙上壁画中的星象排列推导出密码对应黄道十二宫的编号，线索链完整"
        note: "题材特定检查项，仅适用于brainy_action/suspense/mystery等需要智力对抗的题材。审计发现qwen3的BRAINY_ACTION样本中谜题设计全面崩坏"

      # v1.1新增（4个）：解决短篇区分度不足问题
      - subcategory_id: "imagery_system"
        subcategory_name: "意象系统"
        cn_name: "有没有贯穿全文的核心意象，意象有没有意义变奏"
        sort_order: [3, 46]
        tier_level: "advanced"
        description: "核心意象（物件/场景/感官元素）在全文反复出现且在不同阶段发生意义层面的变化（变奏），比喻与主题深度关联而非通用修辞堆砌。短篇/超短篇中本项权重更高——短篇没有篇幅做复杂情节，意象变奏是最经济的结构手段"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        priority: "high"
        validation_method: "llm_semantic_analysis"
        examples:
          - "✅ 有变奏：'信'在故事中经历了 恶作剧→警告→遗书→闭环证明 四次意义变化，与宿命论主题咬合"
          - "✅ 有变奏：'雨'从日常背景→浪漫相遇→失控暴雨→首尾闭合回到起点，意义随情节推进而深化"
          - "❌ 装饰性重复：'月光'反复出现但每次都只是'月光很美'，没有意义变化"
          - "❌ 通用比喻：'像一只找不到出口的飞蛾'——任何故事都能用，不与本故事主题关联"
        note: "深读对比发现：claude超短篇中'信'的意象系统是同题材样本中区分度最高的质量维度之一，kimi有部分意象但不发展，EB5完全无意象系统"

      - subcategory_id: "emotional_gradient"
        subcategory_name: "情感弧线层次"
        cn_name: "主角情感发展有几层变化，每层变化有没有事件驱动"
        sort_order: [3, 47]
        tier_level: "advanced"
        description: "主角情感发展有≥4层性质不同的可辨识状态（不只是程度变化，而是质的变化），每次转折由具体事件驱动。区分真正的层次变化（好奇→恐惧→心动→绝望=4种不同情感）和伪层次（害怕→恐惧→战栗→惊慌=同一情感的4种说法）"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        priority: "high"
        validation_method: "llm_semantic_analysis"
        examples:
          - "✅ 丰富(7层)：好奇→恐惧→试探→心动→绝望→顿悟→宿命感中的平静。每层都由具体事件触发"
          - "❌ 扁平(2层)：焦虑→杀人。中间没有过渡，角色只有起点和终点"
          - "❌ 伪层次：害怕→恐惧→战栗→无法承受。这是同一种情绪的不同说法，不是4层"
          - "❌ 无驱动突变：角色上一段还恨着某人，下一段'她释然了'，中间没有任何事件"
        note: "与pacing_rationality_advanced区分：后者检查节奏（高潮低谷分布），本项检查情感深度（有几层、驱动力是什么）。原挂起的emotional_progression过于笼统，本项从具体样本对比中提炼出可操作的判定标准"

      - subcategory_id: "semantic_redundancy"
        subcategory_name: "语义重复/信息衰减"
        cn_name: "后续章节有没有换了词汇但在说同一件事（P6级）"
        sort_order: [3, 6]
        tier_level: "basic"
        description: "P5段落重复的语义升级版。检测'换了词但传达相同信息'的语义级重复。包括同义反复（同一情感被反复用不同表述重申）、结论反刍（同一认知被多次'重新意识到'）、情境模板复制（不同章节用相同结构只换表面细节）。≥3处语义重复即判定失败。首尾呼应等有意的文学重复不计入"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        priority: "high"
        validation_method: "llm_semantic_analysis"
        examples:
          - "❌ 同义反复：三章结尾分别说'她爱他，这不可改变'/'她的爱是唯一确定的'/'无论如何她知道自己爱他'——同一信息三种说法"
          - "❌ 结论反刍：角色在第4章意识到'信是自己写的'，第5/6/7章反复'重新意识到'同一件事"
          - "❌ 情境模板：连续3章开头都是'清晨醒来→打开信箱→紧张'，结构和信息完全相同"
          - "✅ 首尾呼应：开头和结尾用相同场景，但语境变了含义不同——这是有意的文学重复"
        note: "质量审计发现EB5超短篇后三章几乎在语义层面完全重复前文，但P5无法检测（字符串不同）。本项填补这一盲区。放在basic层因为语义重复是严重的内容质量问题"

      - subcategory_id: "structural_design"
        subcategory_name: "结构功能性"
        cn_name: "叙事结构有没有服务于主题表达（短篇尤重）"
        sort_order: [3, 48]
        tier_level: "advanced"
        description: "叙事结构本身是否参与主题表达——不只是'用什么顺序讲故事'，而是'这个顺序/形式本身就在说一些事'。如首尾闭合=时间闭环、视角切换=不可靠叙述者、双线交叉=因果呼应。对短篇/超短篇权重更高（短篇没有篇幅做复杂情节，结构是最重要的叙事手段）"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        applicable_length_tiers: ["ultra_short", "short", "medium"]
        priority: "high"
        validation_method: "llm_semantic_analysis"
        examples:
          - "✅ 结构=意义：首尾闭合（结尾回到开头的'普通的周二下午'），读者意识到结构本身就是一个时间循环"
          - "✅ 结构=意义：前80%女主视角，最后20%切男主视角，读者发现女主叙述中的'事实'完全不同"
          - "❌ 机械排列：纯按时间顺序排列章节（第1天→第2天→...→结局），开头结尾无呼应"
          - "❌ 拖沓收束：结尾反复解释/总结/抒情，不是有意识的收束设计"
        note: "深读对比发现：claude超短篇的首尾闭合结构本身表达了'时间闭环'主题，这是它与kimi/EB5之间最大的质量差距之一，但现有checker完全无法检测"

      # v1.2新增：角色命名质量
      - subcategory_id: "character_naming_quality"
        subcategory_name: "角色命名质量"
        cn_name: "角色名字有没有文化深度和辨识度（不是烂大街AI名）"
        sort_order: [3, 49]
        tier_level: "advanced"
        description: "角色命名的文化深度、辨识度和角色-命运共振。核心区分'有设计感的好名字'vs'LLM默认通用美名（林晚/陈默/苏晚晴等烂大街名字）'。检查4个维度：角色-名字共振、文化深度、辨识度差异化、姓氏多样性"
        check_types: ["semantic_check"]
        applicable_scenarios: ["original_creation", "adaptation"]
        priority: "medium"
        validation_method: "llm_semantic_analysis"
        examples:
          - "✅ 有设计感：名字与角色命运/性格有映射关系，有文化典故或谐音含义"
          - "❌ LLM默认名：林晚、陈默、苏晚晴、顾辞、沈念——高频AI生成名，无辨识度"
          - "❌ 姓氏单一：5个角色中3个姓'林'，缺乏多样性"
        note: "v1.2新增。审计发现大量模型使用同质化的'通用美名'，缺乏与角色特质的关联。DISPLAY_ONLY：不参与评分（77.6% fail率 + DSV1=DSV2零差异，binary pass/fail无法反映中等水平改善）"

      # === 挂起的维度（暂不启用）===
      # appeal_strength_advanced — 吸引力强度（LLM judge区分度低）
      # emotional_impact — 情感冲击力（LLM judge区分度低）
      # emotional_progression — 已被emotional_gradient替代（v2.9从样本对比中提炼出可操作标准）
      # novelty_appeal — 立意新颖性（太主观）
      # sweetness_quality — 甜度质量（太细，题材特定）
      # humor_effect — 搞笑效果（太细，题材特定）

# ============================================
# 使用说明
# ============================================

usage_notes: |
  1. 在check_list的每个check_item中添加能力维度标注：
     - dimension_id: 第一层能力大类ID
     - subcategory_id: 第二层检查类别ID
     - quality_tier: (可选) 仅用于content_quality维度，值为"basic"/"advanced"

  2. 示例标注：
     # 格式规范类（不需要quality_tier）
     - check_type: "json_schema"
       dimension_id: "format_compliance"
       subcategory_id: "structural_integrity"

     # 内容质量类 - 基础质量
     - check_type: "semantic_check"
       dimension_id: "content_quality"
       subcategory_id: "script_length_adequacy"
       quality_tier: "basic"

     # 内容质量类 - 优秀质量（题材特定）
     - check_type: "semantic_check"
       dimension_id: "content_quality"
       subcategory_id: "sweetness_quality"
       quality_tier: "advanced"
       applicable_genres: ["sweet_romance"]

  3. 统计分析：
     - 按dimension_id聚合：统计各能力大类通过率
     - 按subcategory_id聚合：统计细分类别通过率
     - 按tier_level分层统计：basic/advanced各层通过率
     - 按quality_tier计算最终质量等级（不合格/合格/优秀）
     - 对比不同模型在各维度的表现差异

  4. 题材差异化检查：
     - 使用applicable_genres字段标注题材特定的检查项
     - 统计时按题材过滤检查项（如sweetness_quality仅适用于sweet_romance）

# ============================================
# 版本演进历史
# ============================================

version_history:
  - version: "3.0"
    date: "2026-02-17"
    changes:
      - "【新增维度】content_quality基础层新增chapter_output_existence（章节产出存在性Gate项）：替代sop_stage_coverage，简化为仅检查章节文件是否存在"
      - "【新增维度】content_quality优秀层新增character_naming_quality（角色命名质量）：评判命名的文化深度、辨识度和角色-命运共振"
    rationale: "sop_stage_coverage要求characters.json+outline.json+chapters全存在才pass，doubao写了10章完整内容但缺outline.json即被gate触发，属于假阳性。简化为仅检查最终产出（章节文件）。角色命名质量从rev_007 REVISION_LOG中记录但未导出到checklist，本次补齐"

  - version: "2.9"
    date: "2026-02-14"
    changes:
      - "【新增维度】content_quality优秀层新增imagery_system（意象系统）：检查核心意象贯穿全文且发生意义变奏"
      - "【新增维度】content_quality优秀层新增emotional_gradient（情感弧线层次）：替代挂起的emotional_progression，从样本对比中提炼出可操作标准"
      - "【新增维度】content_quality基础层新增semantic_redundancy（语义重复P6级）：P5的语义升级版，检测换词但同义的重复"
      - "【新增维度】content_quality优秀层新增structural_design（结构功能性）：短篇条件化，检查结构是否服务于主题"
      - "【强化】narrative_density整合Show vs Tell评判维度，check_name更新"
      - "content_quality优秀层从7个扩展为10个（新增3个），基础层从20个扩展为21个（新增1个semantic_redundancy）"
    rationale: "深读claude/kimi/EB5在同一超短篇题目上的作品，发现现有checker只能区分'差'和'不差'，对'好'和'很好'之间的差距全盲。短篇很少犯低级错误，但短篇写好靠的是Show vs Tell、意象变奏、结构即意义、情感层次——这些维度完全未覆盖。语义重复是P5的盲区（字符串不同但意义相同的重复）"

  - version: "2.8"
    date: "2026-02-13"
    changes:
      - "【新增维度】content_quality基础层新增P1-P5共5个程序化内容质量检查项"
      - "P1 chapter_cloning（章节克隆检测）：连续>=2章完全克隆或>=3章前500字克隆。Gate项"
      - "P2 alternating_repetition（交替重复检测）：A-B-A-B等循环模式，连续>=4章。Gate项"
      - "P3 chapter_completion（章节完成度）：实际/大纲 < 0.5 即早期终止。Gate项"
      - "P4 chapter_length_stability（章节长度稳定性）：后1/4均值 < 前1/3均值的50%"
      - "P5 paragraph_repetition（段落重复检测）：跨章>=5组或单章连续>=3"
      - "【新增维度】content_quality基础层新增outline_execution_fidelity（大纲执行忠实度）"
      - "大纲执行忠实度：Agent设计的outline.json与实际chapters的一致性，规划-执行一致性是底线"
      - "【重构】content_quality优秀层从10个精简为7个"
      - "保留：genre_fit、pacing_rationality_advanced、hook_design"
      - "替换：dialogue_quality → dialogue_character_distinction（角色语言辨识度），聚焦审计发现的对话同质化问题"
      - "新增：narrative_density（叙事密度）、puzzle_logic_validity（智斗逻辑合理性，题材特定）"
      - "挂起：appeal_strength、emotional_impact、emotional_progression（LLM judge区分度低，等积累经验后再设计）"
      - "删除：novelty_appeal（太主观）、sweetness_quality（太细）、humor_effect（太细）"
    rationale: "质量审计发现4类需要LLM judge的深层叙事问题：对话同质化、大纲偏离、智斗逻辑崩坏、叙事退化。大纲偏离属于规划-执行一致性底线放basic层。对话辨识度、叙事密度、智斗逻辑放advanced层，均有具体可操作的判定标准。情感类维度因LLM judge评判区分度低暂时挂起"

  - version: "2.7"
    date: "2026-02-12"
    changes:
      - "【新增维度】content_quality基础层新增narrative_tone_match（叙事调性匹配）检查项"
      - "叙事调性匹配：检查文笔风格、叙事语气、修辞手法、节奏感是否与题材类型匹配"
      - "核心问题：'画风搭不搭'——烧脑悬疑不能写成温情言情调，热血冒险不能写成散文诗体"
      - "与emotional_delivery_match区分：后者检查情感倾向方向（爽/虐/烧脑），本项检查文笔画风（文字表达方式）"
      - "与genre_fit区分：后者是advanced层精致度检查（做得好不好），本项是basic层底线检查（像不像）"
    rationale: "v2评测发现kimi-k2.5的烧脑规则怪谈样本（NW_CLEAR_MEDIUM_BRAINY_ACTION_001）文笔风格从第5章开始急剧转向言情调——大量温情细腻的情感描写、牺牲守护主题、'泪水夺眶而出'式的煽情表达，与规则怪谈应有的冷硬紧凑调性严重不搭。现有的emotional_delivery_match无法捕捉此问题（情感方向可能判正确），需要独立检查项"

  - version: "2.6"
    date: "2026-02-11"
    changes:
      - "【新增维度】content_quality基础层新增repeated_endings（反复结局）检查项"
      - "【新增维度】content_quality基础层新增late_stage_digression（后期跑偏）检查项"
      - "反复结局：检测多次出现'全文完/全书完/后记'标记，识别'写不动了硬撑'的典型症状"
      - "后期跑偏：检测workspace中创建无关文件注水，以及chapters中后期章节内容偏离正文（作者感想、读者互动、番外预告等）"
      - "后期跑偏还检测章节长度异常萎缩（后期章节不足前期平均的1/10）"
    rationale: "v2评测发现kimi-k2.5等模型在长篇创作时存在'写不动了'问题：反复草草结局又硬续、后期跑去写乱七八糟的内容凑字数。新增这两个检查项识别长篇创作后劲不足"

  - version: "2.5"
    date: "2026-02-05"
    changes:
      - "【新增维度】content_quality基础层新增plot_progression（情节推进）检查项"
      - "定义：章节必须包含足够的具体故事事件推进，避免纯对话或纯内心独白"
      - "验证重点：故事事件密度（每章事件节点数量）、内容类型占比（事件vs对话vs独白）、情节推进节奏（场景/时间变化、角色行动）、事件因果性"
      - "评分标准：1分（>70%静态内容）→ 3分（2-3个事件，事件占比40-60%）→ 5分（4-5+事件，事件占比>60%）"
      - "与pacing_rationality_advanced区分：plot_progression是basic层的基本推进要求（有没有事件），pacing_rationality_advanced是advanced层的节奏优化（事件安排得好不好）"
    rationale: "v2评测发现部分章节存在'俩人腻腻歪歪说没用的话'的问题，缺乏实质故事推进。新增plot_progression作为basic层检查，确保故事有基本的事件密度和推进节奏"

  - version: "2.4"
    date: "2026-02-02"
    changes:
      - "【新增维度】情感倾向匹配度两层验证体系"
      - "business_rule_compliance层新增emotional_tendency_consistency（情感倾向一致性）：验证配方设计中reaction_strength与用户明确表达的desired_emotion逻辑一致"
      - "content_quality.basic层新增emotional_delivery_match（情感交付匹配度）：验证实际章节内容的情感倾向必须与配方的reaction_strength匹配，不能反向交付"
      - "调整genre_fit定位和描述：明确其为advanced层的精致度检查，与basic层的emotional_delivery_match形成分层验证"
      - "分层逻辑：business_rule层检查Agent理解需求的准确性 → content_quality.basic层检查按配方交付的基本正确性 → content_quality.advanced层检查交付的精致度"
    rationale: "用户明确要求爽文却写成虐文是严重的交付质量问题，应该是basic层失败而非advanced层扣分。分层验证确保：1）配方设计逻辑一致（business_rule层）；2）实际交付情感倾向正确（basic层）；3）题材特征精致完成度高（advanced层）"

  - version: "2.3"
    date: "2026-02-02"
    changes:
      - "【新增维度】优秀层新增emotional_progression（情感层次递进）检查项"
      - "定义：情感从简单到复杂的递进演化，呈现多层次、多维度的情感体验"
      - "与emotional_impact区分：情感冲击力关注峰值强度，情感层次递进关注复杂度演化"
      - "优先级：high（故事深度的关键指标）"
      - "示例递进路径：角色视角（仰慕→成长→自我接纳）、关系视角（甜→虐→更甜→更虐）"
    rationale: "捕捉故事中情感复杂度的演化，区分表面情感重复与深层情感递进，评估作品的情感深度和层次感"

  - version: "2.2"
    date: "2026-02-02"
    changes:
      - "【场景适配】针对小说创作场景调整检查项结构"
      - "篇幅合理性从维度4移至维度2（业务规则遵循-范围约束），属于客观的数量验证而非主观质量评估"
      - "维度4基础层从3个增加到4个：theme_consistency（主题一致性-新增）、main_character_consistency（角色一致性）、character_trait_consistency（人物设定一致性-新增）、logical_contradiction（逻辑硬伤）"
      - "维度4优秀层保留9个检查项，增加priority标注（high/medium/low），支持选择性启用"
      - "优秀层分3组：核心通用（3个-吸引力/情感/题材契合）、扩展通用（4个-节奏/钩子/立意/台词）、题材特定（2个-甜度/搞笑）"
      - "调整优秀层描述，去掉短剧特有概念（如'集数'），改为适合小说的表述"
      - "主题一致性检查：防止主题漂移（如从复仇漂移成商战再漂移成修仙）"
      - "人物设定一致性检查：防止角色崩坏（如聪明人降智、能力设定前后矛盾），允许有铺垫的性格成长"
    rationale: "小说创作场景中，篇幅是用户query明确要求（业务规则），而主题/角色/人设/逻辑是内容创作质量评估；优秀层检查项灵活启用以适应不同评测需求"

  - version: "2.1"
    date: "2026-02-02"
    changes:
      - "【重要调整】去除红线层（伦理道德合规性检查），由专门的合规评估系统处理"
      - "调整质量等级计算逻辑：不合格（basic层失败）→ 合格（basic全过+advanced<70%）→ 优秀（basic全过+advanced≥70%）"
      - "从三层体系（redline/basic/advanced）简化为两层体系（basic/advanced）"
    rationale: "伦理道德合规性由专门评估系统处理，本体系专注创作质量评估"

  - version: "2.0"
    date: "2026-01-29"
    changes:
      - "【重大升级】内容质量维度从两层升级为三层体系（redline/basic/advanced）"
      - "新增红线问题检查（1个）：ethical_compliance"
      - "基础质量层（3个）：script_length_adequacy（篇幅300-500字/集）、main_character_consistency（主要角色一致性）、logical_contradiction（逻辑硬伤-前后矛盾）"
      - "优秀质量层（9个）：7个通用检查（吸引力、情感、节奏、题材契合、钩子、立意、台词）+ 2个题材特定（甜宠、搞笑）"
      - "新增题材差异化检查（applicable_genres字段）"
      - "明确质量等级计算逻辑（四档：红线否决/不合格/合格/优秀）"
    rationale: "基于'标准碎碎念.md'的设计理念，区分致命问题（红线）、可用性问题（基础）、优秀特征（优秀）"

  - version: "1.2"
    date: "2026-01-22"
    changes:
      - "将quality_tiers定义从全局移到content_quality维度下"
      - "增加judge_criteria_versions版本管理体系"
    note: "v1.2为两层体系（basic/advanced），已被v2.0替代"

  - version: "1.1"
    date: "2026-01-21"
    changes:
      - "初始版本，定义6大能力维度和quality_tiers"
