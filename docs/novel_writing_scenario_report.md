# 小说创作Agent（V1版设计）评测场景设计与评测报告

> **Viewer访问地址**：http://172.26.13.6:8889/viewer.html  选择dsv1，查看v1版的任务、执行轨迹、交付内容和自动评测结果

---

## 核心结论：

### 结论一：ERNIE 5.0 关键能力短板

本场景要求Agent按照4阶段SOP（理解需求→创意定义→写作准备→章节创作）完成一部完整小说的创作，涉及Skill文档阅读、HITL交互、结构化文件输出、记忆管理（writing_log）、内容质量控制等多项能力，共40项检查。基于14个样本的评测，三个模型的整体表现如下：

| 模型            | 平均通过率 |
| --------------- | ---------- |
| Claude Opus 4.5 | 89.72%     |
| Gemini 3 Pro    | 82.12%*    |
| ERNIE 5.0       | 76.29%     |
| Kimi K2.5       | 71.34%     |

> *Gemini有6个样本因协议适配问题（Gemini的tool call协议与OpenAI不同，需要单独适配）执行失败，未计入。已在重新适配跑全量中。

ERNIE 5.0与Claude的差距主要集中在以下4个关键短板，这些短板相互关联，共同导致了创作质量的下降：

| 能力短板                                                                                                                                                      | ERNIE | Claude | 差距   |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----- | ------ | ------ |
| 在长程写作任务中，LLM需要通过memory机制来管理写作过程，ernie5.0不主动创建/读取writing_log，会影响到长程写作结果的内容一致性，包括人物和情节，都会出现逻辑断裂 | 32.1% | 78.6%  | -46.5% |
| 在sop的第四阶段，创作正文章节时，应该写正文，ernie5.0却写成了摘要                                                                                             | 50.0% | 100%   | -50.0% |
| 字数不够时跑题注水，大量创建非章节正文的各种乱七八糟的文档                                                                                                    | 28.6% | 92.9%  | -64.3% |
| 在设计阶段设计的角色未在正文中出场，即规划与执行不一致，人物角色匮乏直接导致正文内容情节不够饱满                                                              | 69.2% | 92.9%  | -23.7% |

> 表中百分比为该检查项的**通过率**（通过样本数/总样本数），数值越高表现越好。

**共性问题**：所有模型在"无逻辑硬伤"检查项上通过率都很低（Claude 35.7%、Gemini 0%、ERNIE 7.1%），长篇创作极易出现前后矛盾、设定冲突。

### 结论二：ERNIE 5.0 midtrain（预训练中间版本）vs ERNIE 5.0 对比分析

EB5-0209-A35B-midtrain-128k-chat 是预训练过程中的中间checkpoint，尚未经过后训练（SFT/RLHF）。整体平均通过率从76.29%降至58.94%，呈现出**"基座能力局部提升、行为规范全面缺失"**的特征：

**预训练带来的基座能力提升** —— midtrain改善了ernie-5.0的几个核心短板：

| 检查项 | ernie-5.0 | midtrain | 变化 | 说明 |
|---|---|---|---|---|
| writing_log创建 | 42.9% | 85.7% | **+42.8%** | 记忆管理意识明显增强 |
| 章节是正文而非大纲 | 50.0% | 78.6% | **+28.6%** | 对"写小说该怎么写"有了更好的内在理解 |
| 角色正文出场 | 69.2% | 81.8% | **+12.6%** | 设计的角色更能在正文中落地 |
| 角色大纲出场 | 69.2% | 83.3% | **+14.1%** | 角色在大纲中的规划更完整 |

**缺少后训练导致的行为规范缺失** —— 指令遵循和流程约束能力严重不足：

| 检查项 | ernie-5.0 | midtrain | 变化 | 说明 |
|---|---|---|---|---|
| Skill文档阅读 | 70.6% | 34.1% | **-36.5%** | 断崖式下降，几乎不读skill文档 |
| 跑题注水 | 28.6% | 0.0% | **-28.6%** | 14个样本全部出现无关文件/内容 |
| 情节推进 | 100% | 64.3% | **-35.7%** | 从完美跌到不及格 |
| 主题一致性 | 100% | 78.6% | **-21.4%** | 核心主题开始跑偏 |
| HITL交互 | 100% | 82.1% | **-17.9%** | 开始遗漏必要的用户确认环节 |

**结论**：midtrain的预训练基座能力确实在增强（内容生成质量的部分指标改善），但后训练阶段的指令遵循、SOP流程遵循、文档阅读等行为规范能力尚未注入。预期经过后训练后，应能同时保住基座能力的提升并补回行为规范能力，最终表现有望超过当前ernie-5.0-thinking-preview。

---

## 1. 设计全景

### 1.1 为什么选择小说创作场景

小说创作是一个**复杂创意任务**，天然适合评测Agent的多项核心能力：

| 能力维度               | 在小说创作中的体现                                                   |
| ---------------------- | -------------------------------------------------------------------- |
| **Prompt遵循**   | 能否按照System Prompt中的SOP流程执行（需求理解→写作准备→章节创作） |
| **Tool Use**     | 能否正确调用工具（读取skill文档、HITL交互、文件读写、目录创建）      |
| **任务规划**     | 能否将"写一部小说"分解为阶段性子任务并按序执行                       |
| **领域知识运用** | 能否运用Skill文档体系指导创作（人物设计、大纲设计、写作技巧等）      |
| **长程记忆**     | 多章节创作中能否通过writing_log保持前后一致性                        |
| **内容质量**     | 生成的小说是否符合要求（主题一致、人物一致、情节推进、无逻辑硬伤）   |

### 1.2 核心设计理念：SOP驱动的结构化创作

本场景当前的设计下，核心评测点是 ****Agent能否按照SOP执行复杂的多阶段创作任务**** ****，且交付的内容质量达到基本可用状态****，暂未覆盖到评测创意能力。

**核心设计要素**：

| 设计要素                | 评测目标             | 验证方式                          |
| ----------------------- | -------------------- | --------------------------------- |
| **4阶段SOP**      | Prompt遵循、任务规划 | 检查是否按阶段执行、是否遗漏步骤  |
| **结构化输出**    | Tool Use、格式规范   | JSON Schema验证、文件命名检查     |
| **HITL交互**      | 用户引导、多轮对话   | 检查关键节点是否与用户确认        |
| **Skill文档体系** | 领域知识运用         | 检查是否阅读必需文档              |
| **记忆管理**      | 长程一致性           | 检查writing_log的创建和读取       |
| **内容质量**      | 创作基本功           | LLM Judge评估主题/人物/情节一致性 |

### 1.3 辅助设计：X-Y配方系统

> **适用场景**：仅用于VAGUE类query（用户灵感不清晰时），帮助Agent引导用户明确创作方向。目前评测样本以CLEAR类为主，该系统作用有限。

配方系统将小说创作元素结构化，便于Agent在灵感澄清阶段使用：

- **X轴**：普罗蒂36种剧情模式（A1-G36），提供冲突内核
- **Y轴**：12种现代网文标签，提供表达载体
- **化学反应强度**：轻度(甜爽)、中度(虐心)、剧烈(烧脑)

**在评测中的作用**：主要用于验证枚举值合法性（X轴格式、Y轴标签数量），不作为核心评测点。

### 1.4 创作流程SOP

Agent需要按照4阶段SOP执行：

```
阶段1: 理解需求
  ├── 判断灵感清晰度（clear/vague/no_inspiration）
  ├── 提取关键要素（题材、篇幅、情感基调等）
  └── 识别用户偏好（期望情感、禁忌元素）

阶段2: 创意定义
  ├── [CLEAR] 直接基于用户需求生成creative_intent.json
  ├── [VAGUE] 使用配方系统引导用户明确方向
  ├── [HITL] 与用户确认创意方案
  └── 输出: creative_intent.json

阶段3: 写作准备
  ├── 设计人物（main_characters, supporting_characters）
  ├── 规划大纲（三幕结构：act_one, act_two, act_three）
  ├── [HITL] 写作准备确认
  └── 输出: characters.json, outline.json

阶段4: 章节创作
  ├── 按大纲逐章创作
  ├── 每章完成后更新writing_log.md
  ├── 确保内容与creative_intent一致
  └── 输出: chapters/chapter_01.md, chapter_02.md, ...
```

---

## 2. 样本设计

### 2.1 样本维度矩阵

v1设计了**3个维度**的样本变化：

| 维度                 | 取值                                                                                         | 说明                     |
| -------------------- | -------------------------------------------------------------------------------------------- | ------------------------ |
| **灵感清晰度** | clear / vague                                                                                | 用户是否有明确的创作框架 |
| **篇幅**       | ultra_short(6.5k-1万) / short(1.5-4万) / medium(8-25万) / long(40-60万) / ultra_long(100万+) | 创作字数要求             |
| **情感基调**   | sweet(甜爽) / angsty(虐心) / suspense(烧脑) / neutral(中性)                                  | 期望的情感倾向           |

### 2.2 v1样本概况

共14个样本，覆盖：

- **篇幅**：超短篇3个、短篇4个、中篇4个、长篇2个、超长篇1个
- **情感基调**：甜爽3个、虐心7个、烧脑1个、中性3个
- **灵感清晰度**：全部为clear（用户有明确创作框架）

### 2.3 **篇幅与能力要求的关系**

篇幅越长，对内容构建能力的要求越高。Agent需要知道什么样的篇幅适合用什么方式来构建内容：

- **超短篇(6.5k-1万)**：考察故事的吸引力和触动能力。篇幅短没有机会写大场面，必须在有限字数内精准击中读者情感，带来震撼或触动
- **短篇(1.5-4万)**：考察完整故事弧的构建能力。有一定展开空间，起承转合要完整，人物要有成长或变化
- **中篇(8-25万)**：考察节奏把控和多线叙事能力。篇幅变长后需要合理编排主线支线，同时开始依赖记忆管理保证一致性
- **长篇(40万+)**：考察世界观构建、多角色多线程的编排能力，以及极限的前后一致性维护

---

## 3. 检查项设计

共40项检查，分为4个维度。

### 3.1 format_compliance（格式规范，4项）

验证Agent输出的文件格式是否符合规范。

| 检查项          | 说明                                                                     | 检查方式    |
| --------------- | ------------------------------------------------------------------------ | ----------- |
| 章节命名规范    | chapter_NN.md格式                                                        | 正则匹配    |
| JSON Schema验证 | creative_intent.json / characters.json / outline.json 的格式和字段完整性 | JSON Schema |

### 3.2 business_rule_compliance（业务规则遵循，21项）

验证Agent是否按照业务规则执行创作流程。

| 类别                    | 检查项             | 说明                                                                                                                                               | 检查方式     |
| ----------------------- | ------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ |
| **Skill文档阅读** | 必读Skill文档      | RECIPE_KNOWLEDGE / CHARACTER_DESIGN_GUIDE / OUTLINE_DESIGN_GUIDE / WRITING_TECHNIQUE_GUIDE / CONSISTENCY_MANAGEMENT_GUIDE / CHARACTER_NAMING_GUIDE | 工具调用记录 |
|                         | Schema文件阅读     | creative_intent / characters / outline 的.schema.json                                                                                              | 工具调用记录 |
|                         | 条件触发阅读       | 涉及感情线时读取ROMANCE_WRITING_GUIDE.md                                                                                                           | 条件检查     |
| **SOP流程遵循**   | HITL交互           | 配方选择阶段、写作准备阶段必须调用HITL                                                                                                             | 工具调用记录 |
| **配方约束**      | X轴模式枚举        | 必须匹配^[A-G]\d{1,2}$格式                                                                                                                         | 枚举校验     |
|                         | Y轴标签枚举        | 必须在12种标签中选择                                                                                                                               | 枚举校验     |
|                         | Y轴标签数量        | 必须选择2-3个                                                                                                                                      | 数量校验     |
|                         | forbidden_elements | 至少设置1个禁忌元素                                                                                                                                | 数量校验     |
| **交付物完整性**  | 必需文件存在       | creative_intent.json / characters.json / outline.json / chapters/                                                                                  | 文件检查     |
|                         | 字数范围           | 根据query要求±10%浮动                                                                                                                             | 字数统计     |

### 3.3 content_quality（内容质量，13项）

评估Agent创作的小说内容质量，按**由表及里、由浅入深**的层次组织。

> **注意**：当前所有检查项均为**基础质量层**，主要验证"是否是一部合格的小说"。**高级质量层**（如文笔优美度、情感感染力、创意独特性等偏内容优质向的检查项）尚未加入，将在后续版本中补充。

#### 第一层：形式完整性（是否像一部小说）

| 检查项       | 说明                                   | 检查方式  |
| ------------ | -------------------------------------- | --------- |
| 完整正文输出 | 章节是小说正文，不是大纲摘要或要点列表 | LLM Judge |
| 语言纯净性   | 无不合理的中英混用、无乱码             | LLM Judge |
| 无重复结局   | 不出现多次"全文完"、反复后记           | LLM Judge |
| 无跑题内容   | workspace中无无关文件                  | 规则校验  |

#### 第二层：结构一致性（故事框架是否稳定）

**主题一致性**

| 检查项     | 说明                                                                   | 检查方式  |
| ---------- | ---------------------------------------------------------------------- | --------- |
| 主题一致性 | 核心主题从开篇到结尾不跑偏（如爱情故事不会变成复仇故事再变成修仙故事） | LLM Judge |

**人物一致性**（由浅入深）

| 检查项           | 说明                                            | 检查方式  |
| ---------------- | ----------------------------------------------- | --------- |
| 角色大纲出场     | characters.json设计的主角在outline.json中有规划 | 规则校验  |
| 角色正文出场     | characters.json设计的主角在chapters/中实际出现  | 规则校验  |
| 主角存在性       | 主角不消失、不被配角替换、持续存在于叙事中      | LLM Judge |
| 角色表现符合设计 | 正文中的表现与characters.json的设计一致         | LLM Judge |
| 人物设定一致性   | 同一角色的性格不崩坏（除非有铺垫的成长弧）      | LLM Judge |

#### 第三层：内容质量（故事是否好看）

| 检查项       | 说明                                           | 检查方式  |
| ------------ | ---------------------------------------------- | --------- |
| 情节推进     | 章节间有事件发展，不是原地踏步、纯对话填充     | LLM Judge |
| 情感交付匹配 | 甜爽向写出甜感、虐心向写出虐感、承诺与交付一致 | LLM Judge |
| 无逻辑硬伤   | 无死人复活、时间矛盾、设定冲突等硬伤           | LLM Judge |

### 3.4 memory_management（记忆管理，2项）

验证Agent在长程创作中的记忆管理能力。

| 检查项          | 说明                               | 检查方式     |
| --------------- | ---------------------------------- | ------------ |
| writing_log创建 | 必须创建writing_log.md记录创作进度 | 文件检查     |
| writing_log读取 | 续写章节前必须读取log了解前文内容  | 工具调用记录 |

---

## 4. 评测结果

### 4.1 评测概况

- **评测时间**：2026年2月
- **评测模型**：Claude Opus 4.5、Gemini 3 Pro、ERNIE 5.0
- **样本版本**：v1样本（14个）
- **检查项版本**：rev_003（40项）

### 4.2 整体表现

| 模型            | 样本数 | 平均通过率       |
| --------------- | ------ | ---------------- |
| Claude Opus 4.5 | 14     | **89.72%** |
| Gemini 3 Pro    | 8*     | **82.12%** |
| ERNIE 5.0       | 14     | **76.29%** |
| Kimi K2.5       | 14     | **71.34%** |

> *Gemini原始14个样本中有6个因协议适配问题（Gemini的tool call协议与OpenAI不同，需要单独适配）执行失败，未计入统计。已在重新适配跑全量中。
>
> 平均通过率 = 所有样本的检查项通过率的平均值。每个样本有40项检查，单样本通过率 = 通过的检查项数 / 40。

### 4.3 维度对比

| 维度                     | Claude          | Gemini | ERNIE           | Kimi            | 说明               |
| ------------------------ | --------------- | ------ | --------------- | --------------- | ------------------ |
| format_compliance        | 87.5%           | 65.6%  | 87.5%           | 85.7%           | JSON格式和命名规范 |
| business_rule_compliance | **92.4%** | 87.7%  | 84.3%           | 66.8%           | SOP流程和规则遵循  |
| memory_management        | 78.6%           | 75.0%  | **32.1%** | **92.9%** | writing_log管理    |
| content_quality          | **81.8%** | 73.9%  | 66.8%           | 71.3%           | 内容创作质量       |

### 4.4 子类别对比

| dimension_id             | subcategory_id                 | 中文名称                                              | check_type   | claude-opus-4-5-20251101_pass_rate   | ernie-5.0-thinking-preview_pass_rate   | EB5-0209-A35B-midtrain-128k-chat_pass_rate   | kimi-k2.5_pass_rate   | gemini-3-pro-preview_pass_rate   |
|:-------------------------|:-------------------------------|:------------------------------------------------------|:-------------|:-------------------------------------|:---------------------------------------|:---------------------------------------------|:----------------------|:---------------------------------|
| format_compliance        | naming_convention              | 输出文件的命名规不规范                                | rule         | 100.0% (14/14)                       | 78.6% (11/14)                          | 78.6% (11/14)                                | 100.0% (14/14)        | 75.0% (6/8)                      |
| format_compliance        | structural_integrity           | JSON文件能不能正常解析、符不符合Schema                | rule         | 83.3% (35/42)                        | 90.5% (38/42)                          | 81.0% (34/42)                                | 81.0% (34/42)         | 62.5% (15/24)                    |
| business_rule_compliance | required_skill_reading         | 开工前有没有先读skill文档                             | rule         | 89.7% (61/68)                        | 70.6% (48/68)                          | 34.1% (47/138)                               | 42.8% (59/138)        | 92.1% (35/38)                    |
| business_rule_compliance | sop_compliance                 | 该走HITL确认的环节有没有走                            | rule         | 100.0% (28/28)                       | 100.0% (28/28)                         | 82.1% (23/28)                                | 92.9% (26/28)         | 100.0% (16/16)                   |
| business_rule_compliance | output_completeness            | 该交付的文件类型齐不齐                                | rule         | 100.0% (56/56)                       | 92.9% (52/56)                          | 85.7% (48/56)                                | 100.0% (56/56)        | 90.6% (29/32)                    |
| business_rule_compliance | enum_validity                  | 配方参数值是否在合法枚举范围内                        | rule         | 100.0% (28/28)                       | 100.0% (24/24)                         | 90.0% (18/20)                                | 92.9% (26/28)         | 92.9% (13/14)                    |
| business_rule_compliance | quantity_constraint            | 配方参数数量对不对（如Y轴标签要求2-3个）              | rule         | 100.0% (28/28)                       | 100.0% (24/24)                         | 80.0% (16/20)                                | 92.9% (26/28)         | 100.0% (14/14)                   |
| business_rule_compliance | range_constraint               | 总字数在不在要求的范围内                              | rule         | 28.6% (4/14)                         | 35.7% (5/14)                           | 7.1% (1/14)                                  | 14.3% (2/14)          | 12.5% (1/8)                      |
| memory_management        | log_file_creation              | 有没有创建writing_log记录创作进度                     | rule         | 100.0% (14/14)                       | 42.9% (6/14)                           | 85.7% (12/14)                                | 100.0% (14/14)        | 87.5% (7/8)                      |
| memory_management        | log_file_usage                 | 续写时有没有先读writing_log了解前文                   | rule         | 57.1% (8/14)                         | 21.4% (3/14)                           | 14.3% (2/14)                                 | 85.7% (12/14)         | 62.5% (5/8)                      |
| content_quality          | full_narrative_content         | 章节内容是完整正文还是大纲摘要                        | semantic     | 100.0% (14/14)                       | 50.0% (7/14)                           | 78.6% (11/14)                                | 78.6% (11/14)         | 75.0% (6/8)                      |
| content_quality          | language_purity                | 正文有没有不合理的中英混用                            | semantic     | 92.9% (13/14)                        | 78.6% (11/14)                          | 85.7% (12/14)                                | 50.0% (7/14)          | 100.0% (8/8)                     |
| content_quality          | character_presence_in_outline  | 设计的主角在大纲中有没有规划                          | rule         | 78.6% (11/14)                        | 69.2% (9/13)                           | 83.3% (10/12)                                | 90.9% (10/11)         | 85.7% (6/7)                      |
| content_quality          | character_presence_in_chapters | 设计的主角在正文章节中出没出现                        | rule         | 92.9% (13/14)                        | 69.2% (9/13)                           | 81.8% (9/11)                                 | 90.9% (10/11)         | 85.7% (6/7)                      |
| content_quality          | character_design_adherence     | 正文中角色表现符不符合characters.json的人设           | semantic     | 100.0% (14/14)                       | 78.6% (11/14)                          | 64.3% (9/14)                                 | 92.9% (13/14)         | 87.5% (7/8)                      |
| content_quality          | character_trait_consistency    | 同一角色的性格前后章节有没有变                        | semantic     | 100.0% (14/14)                       | 85.7% (12/14)                          | 71.4% (10/14)                                | 85.7% (12/14)         | 100.0% (8/8)                     |
| content_quality          | theme_consistency              | 故事核心主题从头到尾有没有跑偏                        | semantic     | 100.0% (14/14)                       | 100.0% (14/14)                         | 78.6% (11/14)                                | 92.9% (13/14)         | 100.0% (8/8)                     |
| content_quality          | plot_progression               | 章节之间情节有没有在往前推进                          | semantic     | 100.0% (14/14)                       | 100.0% (14/14)                         | 64.3% (9/14)                                 | 100.0% (14/14)        | 100.0% (8/8)                     |
| content_quality          | emotional_delivery_match       | 写出来的内容读起来是不是要求的那个味（甜/虐/烧脑）    | semantic     | 71.4% (10/14)                        | 71.4% (10/14)                          | 57.1% (8/14)                                 | 64.3% (9/14)          | 62.5% (5/8)                      |
| content_quality          | logical_contradiction          | 情节有没有逻辑硬伤（死人复活/前后矛盾）               | semantic     | 35.7% (5/14)                         | 7.1% (1/14)                            | 7.1% (1/14)                                  | 7.1% (1/14)           | 0.0% (0/8)                       |
| content_quality          | main_character_consistency     | 前中后主要角色保持一致，主角不能消失或被替换          | semantic     | 100.0% (14/14)                       | 92.9% (13/14)                          | 78.6% (11/14)                                | 100.0% (14/14)        | 100.0% (8/8)                     |
| content_quality          | repeated_endings               | 不能出现多次结局标记（全文完/全书完/后记）            | semantic     | 92.9% (13/14)                        | 78.6% (11/14)                          | 57.1% (8/14)                                 | 78.6% (11/14)         | 87.5% (7/8)                      |
| content_quality          | late_stage_digression          | workspace不能有无关文件，后期章节不能跑偏写非正文内容 | semantic     | 92.9% (13/14)                        | 28.6% (4/14)                           | 0.0% (0/14)                                  | 0.0% (0/14)           | 87.5% (7/8)                      |

### 4.5 关键发现

#### 4.5.1 共性难点（所有模型通过率低）

| 检查项                    | Claude | Gemini | ERNIE | Kimi  | 问题分析                     |
| ------------------------- | ------ | ------ | ----- | ----- | ---------------------------- |
| **字数达标**        | 28.6%  | 12.5%  | 35.7% | 14.3% | 短篇容易超字数，中篇容易不够 |
| **无逻辑硬伤**      | 35.7%  | 0%     | 7.1%  | 7.1%  | 长篇创作极易出现前后矛盾     |
| **writing_log读取** | 57.1%  | 62.5%  | 21.4% | 85.7% | 续写时忘记先读log了解前文    |

#### 4.5.2 ERNIE特有短板

| 检查项                       | ERNIE | Claude | 差距   | 问题描述                               |
| ---------------------------- | ----- | ------ | ------ | -------------------------------------- |
| **writing_log创建**    | 42.9% | 100%   | -57.1% | 不主动创建创作日志                     |
| **章节是正文而非大纲** | 50.0% | 100%   | -50.0% | 部分章节输出的是大纲式摘要而非小说正文 |
| **后期跑题注水凑字数** | 28.6% | 92.9%  | -64.3% | 创建无关文件、内容跑题                 |
| **Skill文档阅读**      | 70.6% | 89.7%  | -19.1% | 不积极阅读Schema等规范文档             |
| **角色正文出场**       | 69.2% | 92.9%  | -23.7% | 设计的角色在正文中未出现               |

#### 4.5.3 Kimi K2.5 表现特点

Kimi K2.5整体通过率71.34%排名第四，但呈现出**"记忆管理能力突出、行为规范和语言质量拖后腿"**的独特特征，与其他模型的能力分布差异明显。

**突出优势——记忆管理全场第一**：

| 检查项 | Kimi | Claude | ERNIE | 说明 |
|---|---|---|---|---|
| writing_log创建 | **100%** | 100% | 42.9% | 与Claude并列第一 |
| writing_log读取 | **85.7%** | 57.1% | 21.4% | **全场最高**，超过Claude近30% |
| 角色大纲出场 | 90.9% | 78.6% | 69.2% | 规划与设计的一致性好 |
| 角色正文出场 | 90.9% | 92.9% | 69.2% | 接近Claude水平 |
| 情节推进 | 100% | 100% | 100% | 完美 |

Kimi在记忆管理维度达到92.9%，是唯一超过Claude（78.6%）的模型，说明其在长程任务中主动维护上下文一致性的意识很强。

**核心短板**：

| 检查项 | Kimi | Claude | 差距 | 问题描述 |
|---|---|---|---|---|
| **后期跑题注水** | 0.0% | 92.9% | **-92.9%** | 14个样本全部出现无关文件/跑题内容，全场最差（与midtrain并列） |
| **语言纯净性** | 50.0% | 92.9% | **-42.9%** | 全场最低，正文中大量不合理的中英混用 |
| **Skill文档阅读** | 42.8% | 89.7% | **-46.9%** | 不积极阅读Skill文档，尤其是v1版本中没有要求的5份新文档 |

**小结**：Kimi的能力画像呈现出明显的"偏科"特征——记忆管理和角色追踪能力出色（甚至超过Claude），但在行为规范（跑题注水、Skill文档阅读）和语言质量（中英混用）方面存在严重短板。跑题注水0%意味着每个样本的workspace中都有不该出现的文件或内容，这是拉低整体分数的最大单一因素。

#### 4.5.4 Gemini特有问题

| 问题                | 影响             | 说明                                                                   |
| ------------------- | ---------------- | ---------------------------------------------------------------------- |
| Tool Call协议适配   | 6/14样本执行失败 | Gemini的tool call协议与OpenAI不同，需要单独适配。已在重新适配跑全量中 |
| JSON Schema通过率低 | 12.5%~87.5%      | creative_intent.json经常格式不合法                                     |

## 5. 总结

根据评测结果，Agent的小说创作能力可以分为三层：

```
✅ 已掌握（通过率>90%）
   ├── 基础SOP执行：配方选择、写作准备的HITL交互
   ├── 枚举约束遵循：X轴模式、Y轴标签的合法性
   ├── 主题把控：核心主题从头到尾不跑偏
   └── 情节推进：章节间有事件发展

⚠️ 部分掌握（通过率50-90%）
   ├── Skill文档阅读：会读基础文档，但条件触发的不稳定
   ├── 文件格式：JSON大体正确，但Schema细节容易出错
   ├── 角色追踪：设计的角色基本会出现，但偶有遗漏
   └── 记忆管理（Claude/Gemini）：会创建log，但不一定读取

❌ 未掌握（通过率<50%）
   ├── 字数控制：短篇超字数，中篇不够
   ├── 逻辑一致性：长篇创作极易出现前后矛盾
   ├── 记忆管理（ERNIE）：不主动创建和读取writing_log
   └── 正文输出（ERNIE）：容易输出大纲式摘要而非小说正文
```

---

## 6. v2设计（评测进行中）

基于v1评测发现的问题，设计了v2版本。

### 6.1 为什么要升级

| 设计层                      | 问题           | v1现状                               | v2解决方案                          |
| --------------------------- | -------------- | ------------------------------------ | ----------------------------------- |
| **Query设计**         | 长篇成本过高   | 超长篇需几十轮对话，单样本耗时数小时 | 砍掉长篇和超长篇，聚焦短篇和中篇    |
| **Query设计**         | 超短篇差异大   | 超短篇评价体系与数万字篇幅本质不同   | 砍掉超短篇，单独设计评测场景        |
| **Query设计**         | 题材多样性不足 | 偏重言情类query                      | 丰富男频、女频、耽美等多用户向query |
| **System Prompt设计** | SOP不够清晰    | 对创作流程描述较粗                   | 重构，明确4阶段SOP                  |
| **Skill设计**         | Skill支撑不足  | 只有3份基础Skill文档                 | 新增5份专业Skill文档                |
| **用户模拟器设计**    | 辅助不足       | 只模拟用户行为，不提供引导           | 加入提醒Agent查看skill的话术        |

### 6.2 核心升级内容

#### System Prompt升级

v2对System Prompt进行了全面重构：

| 升级点                   | v1                                   | v2                                                                                                                                                                          |
| ------------------------ | ------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Skill阅读指引**  | 开头笼统要求"任务开始时必须阅读"     | 每个阶段明确列出"开始前必须读取"的具体文档                                                                                                                                  |
| **Skill概览表**    | 无                                   | 新增Skill文档概览表，明确每份文档的所属阶段和内容概要                                                                                                                       |
| **阶段结构**       | 只有流程描述                         | 每阶段统一结构：目标→开始前必读→实施方式→交付前验证→交付物                                                                                                              |
| **大纲设计要求**   | 只要求"三幕结构大纲（必须有转折点）" | 明确三层结构：story_synopsis(500-1000字) → chapter_synopsis(200-400字) → scene_sequence(至少3个场景)；要求充分规划情节确保撑起目标篇幅，避免后期疲软注水或反复结局        |
| **场景设计规范**   | 无                                   | 要求8个必需字段(scene_number/location/characters_present/purpose/core_action/conflict_point/emotional_shift/outcome)，core_action必须是可视化具体行为，场景间必须有因果关系 |
| **人物关系设计**   | 无单独要求                           | 新增人物关系设计要求：初始关系、核心张力、变化轨迹，转折点与大纲呼应                                                                                                        |
| **一致性保障**     | 只提"读取log了解前文"                | 系统性要求：定期对照creative_intent.json、建立设定登记簿、每章创作前核对/后自检                                                                                             |
| **字数不达标处理** | 无                                   | 明确"返回阶段3修改大纲再进入阶段4"，而非注水填充                                                                                                                            |
| **情节密度要求**   | 无                                   | 新增"章节必须包含足够的具体故事事件，避免纯对话或纯内心独白"                                                                                                                |

#### Skill文档体系

| Skill文档                           | 作用                           | v1 | v2 |
| ----------------------------------- | ------------------------------ | :-: | :-: |
| `RECIPE_KNOWLEDGE.md`             | X轴36种剧情模式 + Y轴12种标签  | ✓ | ✓ |
| `CHARACTER_DESIGN_GUIDE.md`       | 人物traits、动机、秘密恐惧设计 | - | ✓ |
| `WRITING_TECHNIQUE_GUIDE.md`      | 场景、对话、叙事等写作技法     | - | ✓ |
| `CHARACTER_NAMING_GUIDE.md`       | 角色命名方法                   | ✓ | ✓ |
| `OUTLINE_DESIGN_GUIDE.md`         | 三层大纲结构设计方法           | - | ✓ |
| `CONSISTENCY_MANAGEMENT_GUIDE.md` | 设定登记簿、一致性检查清单     | - | ✓ |
| `ROMANCE_WRITING_GUIDE.md`        | 感情线写作技巧                 | - | ✓ |
| `SHORT_STORY_GUIDE.md`            | 短篇专用技巧                   | ✓ | ✓ |

#### 用户模拟器升级

v2用户模拟器在prompt中加入**提醒Agent查看skill的话术**，测试Agent是否能响应用户提示、主动查阅相关文档：

```
1. 配方选择阶段：
   选完后自然地建议Agent接下来设计角色和大纲时参考人物设计指南(CHARACTER_DESIGN_GUIDE.md)、
   起名指南(CHARACTER_NAMING_GUIDE.md)和大纲设计指南(OUTLINE_DESIGN_GUIDE.md)

2. 写作准备确认阶段：
   确认后建议Agent开始写章节前先阅读写作技巧指南(WRITING_TECHNIQUE_GUIDE.md)和
   设定一致性管理指南(CONSISTENCY_MANAGEMENT_GUIDE.md)，建立设定登记簿追踪时间线、
   能力规则、角色属性等，避免前后矛盾的逻辑漏洞
   
   如果大纲中涉及感情线，额外建议Agent阅读感情线写作技巧指南(ROMANCE_WRITING_GUIDE.md)
```

### 6.3 v2样本概况

共10个样本，覆盖：

- **篇幅**：短篇2个、中篇8个（砍掉超短篇、长篇、超长篇）
- **情感基调**：甜爽3个、虐心2个、烧脑2个、中性1个、其他2个
- **灵感清晰度**：clear 9个、vague 1个
